"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[6791],{89420:(e,t,i)=>{i.r(t),i.d(t,{default:()=>zn});var o,n=i(11040),r=i(9236),a=i(91051),l=i(21041),s=i(9722),d=i(39669),c=i(72306),u=i(8721),v=i(97801),p=i(74472),m=i(2734),h=i(34708),g=i(43039),x=i(90757),f=i(65915),b=i(21137),w=i(12085),j=i(48036),y=i(17769),_=i(47063),k=i(34321),C=i(72240),S=i(86953),I=i(19330),L=i(14870),M=i(76967),T=i(52053),D=i(8456),O=i(53304),E=i(66307),B=i(57155),P=i(29046),Z=i(10408);!function(e){e.VideoCoverShow="video_cover_show",e.VideoCoverClick="video_cover_click",e.BackFypClick="back_fyp_click",e.BrowseModeEntryClick="browse_mode_entry_click",e.KebabMenuHover="kebab_menu_hover",e.RelatedVideoImprCnt="related_video_impr_cnt"}(o||(o={}));const R=e=>{Z.W.event("video_cover_show",Object.assign(Object.assign({},e),{enter_method:"video_detail",type:"video_detail"}))},z=e=>{Z.W.event("video_cover_click",Object.assign(Object.assign({},e),{enter_method:"video_detail",type:"video_detail"}))};var F=i(75131),V=i(16926),q=i(59245),W=i.n(q),H=i(90293),A=i(33104),N=i(66958),U=i(61453),$=i(50218),G=i(83421),Y=i(76985),J=i(16119),Q=i(16454),K=i(13033),X=i(88228),ee=i(5100),te=i(64047),ie=i(73566),oe=i(48185),ne=i(19630),re=i(62245),ae=i(82346),le=i(60595),se=i(20948),de=i(56979),ce=i(53095),ue=i(93859),ve=i(68854),pe=i(47165);const me=e=>{var t;const i={"cmn-Hans-CN":"zh-CN","eng-US":"en-US","jpn-JP":"jp-JP","kor-KR":"ko-KR","cmn-Hans-CN|eng-US":"en-US","rus-RU":"ru-RU","fra-FR":"fr-FR","por-PT":"pt-PT","spa-ES":"es-ES","afr-ZA":"en-ZA","ben-BD":"bn-BD","ces-CZ":"cs-CZ","dan-DK":"da-DK","nld-NL":"nl-NL","fin-FI":"fi-FI","deu-DE":"de-DE","ell-GR":"el-GR","hun-HU":"hu-HU","ind-ID":"id-ID","gle-IE":"en-IE","ita-IT":"it-IT","nor-NO":"no-NO","pol-PL":"pl-PL","swe-SE":"sv-SE","tha-TH":"th-TH","tur-TR":"tr-TR","ara-SA":"ar-SA","fra-CA":"fr-CA","cmn-Hant-CN":"zh-TW","heb-IL":"he-IL","jva-ID":"id-ID","ron-RO":"ro-RO","hin-IN":"hi-IN","ben-IN":"bn-BD","slk-SK":"sk-SK"};return null!==(t=null==i?void 0:i[e])&&void 0!==t?t:"en-US"};var he=i(84785);const ge=/([0-9]{1,2})?:?([0-9]{2}):([0-9]{2}\.[0-9]{2,3})/;function xe(e){return ge.test(e)}function fe(e){const t=e.match(ge);let i=60*parseFloat(t[1]||"0")*60;return i+=60*parseFloat(t[2]),i+=parseFloat(t[3]),Number(i.toFixed(6))}var be=i(57244),we=i(4206);let je=class{constructor(e){this.fetch=e}downloadTranscript(e){return this.fetch.get(e)}};je=(0,te.__decorate)([(0,be.G)(),(0,te.__metadata)("design:paramtypes",[we.r])],je);let ye=class extends ie.D{constructor(e,t,i,o,n,r){super(),this.transcriptService=e,this.itemList=t,this.videoPlayer=i,this.videoExperience=o,this.itemModule=n,this.appContext=r,this.defaultState={currentIndex:0,itemListKey:"video",subtitleContent:[],ifShowSubtitle:!1,subtitleStruct:null}}setCurrentIndex(e,t){e.currentIndex=t}setSubtitleContent(e,t){e.subtitleContent=t}setIfShowSubtitle(e,t){e.ifShowSubtitle=t}setSubtitleStruct(e,t){const i=this.getOriginalSubtitleStruct(t);i&&(e.subtitleStruct=i)}handleSelectVideo(e){return e.pipe((0,se.M)(this.state$,this.itemList.state$,this.itemModule.state$),(0,de.U)((([{newIndex:e},{itemListKey:t},i,o])=>{var n,r,a;const l=null!==(a=(null!==(r=null===(n=i[null!=t?t:""])||void 0===n?void 0:n.browserList)&&void 0!==r?r:[])[e])&&void 0!==a?a:"";return{itemListKey:t,item:o[l],newId:l}})),(0,ce.z)((({itemListKey:e,item:t,newId:i})=>{const o=Object.assign(Object.assign({},t),{author:{nickname:null==t?void 0:t.nickname,uniqueId:null==t?void 0:t.author,id:null==t?void 0:t.authorId,secUid:null==t?void 0:t.authorSecId,avatarThumb:null==t?void 0:t.avatarThumb}});return(0,re.z)((0,ae.of)(this.itemList.getActions().resetItemList({key:e})),(0,ae.of)(this.itemList.getActions().setList({key:e,response:{loading:!0,statusCode:0,itemList:[o],hasMore:!0}})),(0,ae.of)(...this.updateVideoIndex({newIndex:0,isIndexInvalid:!1,newId:i,enterMethod:"video_cover_click"})),this.itemList.getRelatedList$({key:"video",itemId:i}))})))}handleSwitchVideo(e){return e.pipe((0,ue.b)((()=>{this.videoExperience.reportVideoInteractStart({startTime:Date.now(),situation:"video_detail_select"})})),(0,se.M)(this.state$,this.itemList.state$,this.itemModule.state$,this.appContext.state$),(0,de.U)((([{newIndex:e},{itemListKey:t,currentIndex:i},o,n,r])=>{var a,l,s;const d=null!==(l=null===(a=o[null!=t?t:""])||void 0===a?void 0:a.browserList)&&void 0!==l?l:[];return{newIndex:e,isIndexInvalid:!(null==d?void 0:d.length)||e<0||e===i,newId:null!==(s=d[e])&&void 0!==s?s:"",enterMethod:"video_detail",itemModuleState:n,appContextState:r}})),(0,ue.b)((({isIndexInvalid:e})=>{e&&console.warn("cannot switch to next video for some reasons")})),(0,ce.z)((e=>{var{itemModuleState:t,appContextState:i}=e,o=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(i[o[n]]=e[o[n]])}return i}(e,["itemModuleState","appContextState"]);const n=[...this.updateVideoIndex(o)];return o.isIndexInvalid||n.push(this.getActions().setSubtitleContent([])),(0,ae.of)(...n)})),(0,pe.n)({}))}handleFirstVideo(e){return e.pipe((0,se.M)(this.state$,this.itemList.state$),(0,de.U)((([e,{itemListKey:t},i])=>{var o,n,r;const a=null!==(n=null===(o=i[null!=t?t:""])||void 0===o?void 0:o.browserList)&&void 0!==n?n:[];return{newIndex:0,isIndexInvalid:!(null==a?void 0:a.length)||0>a.length-1,newId:null!==(r=a[0])&&void 0!==r?r:"",enterMethod:"video_detail"}})),(0,ue.b)((({isIndexInvalid:e})=>{e&&console.warn("cannot switch to first video for some reasons")})),(0,ce.z)((e=>(0,ae.of)(...this.updateVideoIndex(e)))),(0,pe.n)({}))}downloadTranscript(e){return e.pipe((0,ce.z)((e=>this.fetchTranscript(e).pipe((0,de.U)((e=>this.getActions().setSubtitleContent(e)))))))}fetchTranscript(e){var t;const i=this.getOriginalSubtitleStruct(e.subtitleInfos),o=Math.floor((new Date).getTime()/1e3);return!i||!i.url||(null!==(t=null==i?void 0:i.expire)&&void 0!==t?t:0)<=o?(0,ae.of)([]):this.transcriptService.downloadTranscript(i.url).pipe((0,ve.K)((()=>(0,ae.of)(void 0))),(0,de.U)((e=>e?((e,t)=>{if(!e||"string"!=typeof e)return{cues:[]};t||(t={});const{meta:i=!1,strict:o=!0}=t,n=(e=(e=(e=e.trim()).replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).split("\n\n"),r=n.shift();if(!(null==r?void 0:r.startsWith("WEBVTT")))throw new Error('Must start with "WEBVTT"');const a=r.split("\n"),l=a[0].replace("WEBVTT","");if(l.length>0&&" "!==l[0]&&"\t"!==l[0])throw new Error("Header comment must start with space or tab");if(0===n.length&&1===a.length)return{valid:!0,strict:o,cues:[],errors:[]};if(!i&&a.length>1&&""!==a[1])throw new Error("Missing blank line after signature");const{cues:s,errors:d}=function(e,t){const i=[];return{cues:e.map(((e,o)=>{try{return function(e,t,i){let o=0,n=.01,r="";const a=e.split("\n").filter(Boolean);if(a.length>0&&a[0].trim().startsWith("NOTE"))return null;if(1===a.length&&!a[0].includes("--\x3e"))throw new Error(`Cue identifier cannot be standalone (cue #${t})`);if(a.length>1&&!a[0].includes("--\x3e")&&!a[1].includes("--\x3e"))throw new Error(`Cue identifier needs to be followed by timestamp (cue #${t})`);const l=a[0].split(" --\x3e ");if(2!==l.length||!xe(l[0])||!xe(l[1]))throw new Error(`Invalid cue timestamp (cue #${t})`);const s=function(e){const t=e.split(".")[0],i=t.split(":");return"00"!==i[0]?t:`${i[1]}:${i[2]}`}(l[0]);if(o=fe(l[0]),n=fe(l[1]),i){if(o>n)throw new Error(`Start timestamp greater than end (cue #${t})`);if(n<=o)throw new Error(`End must be greater than start (cue #${t})`)}if(!i&&n<o)throw new Error(`End must be greater or equal to start when not strict (cue #${t})`);return a.shift(),r=a.join("\n"),!!r&&{start:o,end:n,text:r,startStr:s}}(e,o,t)}catch(e){return i.push(e),null}})).filter(Boolean),errors:i}}(n,o);if(o&&d.length>0)throw d[0];const c=i?function(e){const t={};return e.slice(1).forEach((e=>{const i=e.indexOf(":"),o=e.slice(0,i).trim(),n=e.slice(i+1).trim();t[o]=n})),Object.keys(t).length>0?t:null}(a):null,u={valid:0===d.length,strict:o,cues:s,errors:d,meta:{}};return i&&c&&(u.meta=c),u})(e).cues:[])))}updateVideoIndex({newIndex:e,isIndexInvalid:t,newId:i,enterMethod:o}){return t?[this.noop()]:[this.videoPlayer.getActions().updateVideo({currentVideo:{index:e,id:i,mode:4},playProgress:0,teaParams:{isVideoDetail:!0,enterMethod:o}}),this.getActions().setCurrentIndex(e)]}getOriginalSubtitleStruct(e){const t=null==e?void 0:e.find((e=>"1"===e.Version||"3"===e.Version));if((null==t?void 0:t.Url)&&(null==t?void 0:t.LanguageCodeName))return{url:t.Url,language:me(t.LanguageCodeName),expire:t.UrlExpire}}};(0,te.__decorate)([(0,oe.lF)(),(0,te.__metadata)("design:type",Function),(0,te.__metadata)("design:paramtypes",[Object,Number]),(0,te.__metadata)("design:returntype",void 0)],ye.prototype,"setCurrentIndex",null),(0,te.__decorate)([(0,oe.lF)(),(0,te.__metadata)("design:type",Function),(0,te.__metadata)("design:paramtypes",[Object,Array]),(0,te.__metadata)("design:returntype",void 0)],ye.prototype,"setSubtitleContent",null),(0,te.__decorate)([(0,oe.lF)(),(0,te.__metadata)("design:type",Function),(0,te.__metadata)("design:paramtypes",[Object,Boolean]),(0,te.__metadata)("design:returntype",void 0)],ye.prototype,"setIfShowSubtitle",null),(0,te.__decorate)([(0,oe.lF)(),(0,te.__metadata)("design:type",Function),(0,te.__metadata)("design:paramtypes",[Object,Object]),(0,te.__metadata)("design:returntype",void 0)],ye.prototype,"setSubtitleStruct",null),(0,te.__decorate)([(0,oe.Qm)(),(0,te.__metadata)("design:type",Function),(0,te.__metadata)("design:paramtypes",[le.y]),(0,te.__metadata)("design:returntype",void 0)],ye.prototype,"handleSelectVideo",null),(0,te.__decorate)([(0,oe.Qm)(),(0,te.__metadata)("design:type",Function),(0,te.__metadata)("design:paramtypes",[le.y]),(0,te.__metadata)("design:returntype",void 0)],ye.prototype,"handleSwitchVideo",null),(0,te.__decorate)([(0,oe.Qm)(),(0,te.__metadata)("design:type",Function),(0,te.__metadata)("design:paramtypes",[le.y]),(0,te.__metadata)("design:returntype",void 0)],ye.prototype,"handleFirstVideo",null),(0,te.__decorate)([(0,oe.Qm)(),(0,te.__metadata)("design:type",Function),(0,te.__metadata)("design:paramtypes",[le.y]),(0,te.__metadata)("design:returntype",void 0)],ye.prototype,"downloadTranscript",null),ye=(0,te.__decorate)([(0,ne.Y)("VideoDetailModule"),(0,te.__metadata)("design:paramtypes",[je,p.h,G.f,ee.KF,M.A,he.G])],ye);var _e=i(25956),ke=i.n(_e),Ce=i(49584),Se=i(58569),Ie=i(5549),Le=i(23028),Me=i(17230),Te=i(40022),De=i(92311);let Oe=class{constructor(e){this.fetch=e}getVideoDetail(e){return this.fetch.get("/api/item/detail/",{query:e,baseUrlType:2})}};Oe=(0,te.__decorate)([(0,be.G)(),(0,te.__metadata)("design:paramtypes",[we.r])],Oe);let Ee=class{redirect(e){}};Ee=(0,te.__decorate)([(0,be.G)()],Ee);let Be=class extends ie.D{constructor(e,t,i,o,n,r){super(),this.service=e,this.redirectService=t,this.appContext=i,this.itemList=o,this.seoModule=n,this.videoDetail=r,this.defaultState={statusCode:0}}setStatusCode(e,t){e.statusCode=t}getVideoDetail(e){return e.pipe((0,se.M)(this.appContext.state$,this.seoModule.state$),(0,de.U)((([{itemId:e,query:t},i,o])=>{var n,r,a,l,s,d;const{appContext:c}=i,u=null!==(n=(0,Le.x)(null==c?void 0:c.abTestVersion,"add_transcript"))&&void 0!==n?n:"v1",v=null!==(s=null===(l=null===(a=null===(r=null==o?void 0:o.abtest)||void 0===r?void 0:r.parameters)||void 0===a?void 0:a.transcript)||void 0===l?void 0:l.version)&&void 0!==s?s:"v1",p=ke()(["v2","v3","v4"],[u,v]).length>0;return{itemId:e,lang:i.lang,query:t,isGoogleBot:null===(d=i.appContext)||void 0===d?void 0:d.isGoogleBot,transcriptEnabled:p}})),(0,Ce.z)((({itemId:e="",lang:t,query:i="",isGoogleBot:o,transcriptEnabled:n})=>this.service.getVideoDetail({aid:Me.CO,itemId:e}).pipe((0,ue.b)((e=>{this.redirectService.redirect(e)})),(0,ce.z)((e=>{var r,a;const{statusCode:l,itemInfo:s}=e,d=null==s?void 0:s.itemStruct,c=[(0,ae.of)(this.getActions().setStatusCode(l),this.itemList.getActions().setList({key:"video",response:{statusCode:l,itemList:d?[d]:[],hasMore:!0}}))];let u=!1;if(0===l){if(n){const{subtitleInfos:n}=null!==(a=null===(r=null==s?void 0:s.itemStruct)||void 0===r?void 0:r.video)&&void 0!==a?a:{};c.push((0,ae.of)(this.videoDetail.getActions().setSubtitleStruct(n))),n&&o&&(0,Te.y)()&&(c.push(this.videoDetail.fetchTranscript({subtitleInfos:n}).pipe((0,ce.z)((o=>(0,Se.T)((0,ae.of)(this.videoDetail.getActions().setSubtitleContent(o)),this.seoModule.setVideoSEOProps(e,{language:t},i,{autoCaption:(null!=o?o:[]).map((e=>null==e?void 0:e.text)).filter(Boolean).join(".")})))))),u=!0)}o&&c.push(this.itemList.getRecommendList$({key:"video"}))}return u||c.push(this.seoModule.setVideoSEOProps(e,{language:t},i)),(0,Se.T)(...c)})),(0,Ie.l)(this.itemList.getActions().setListKeyword({key:"video",keyword:e}),this.terminate())))))}};function Pe(){const{currentIndex:e}=(0,r.mp)(ye),[{loading:t,hasMore:i,currentItemId:o},n]=(0,r.b7)(p.h,{selector:t=>{var i,o,n,r,a,l;return{loading:null!==(o=null===(i=null==t?void 0:t.video)||void 0===i?void 0:i.loading)&&void 0!==o&&o,hasMore:null===(r=null===(n=null==t?void 0:t.video)||void 0===n?void 0:n.hasMore)||void 0===r||r,currentItemId:null!==(l=null===(a=null==t?void 0:t.video)||void 0===a?void 0:a.browserList[e])&&void 0!==l?l:0}},dependencies:[e]}),{shouldUseRelatedVideo:l}=(0,j.e6)();return(0,a.useCallback)((()=>{!t&&i&&(l?n.getRelatedList({key:"video",itemId:o}):n.getRecommendList({key:"video"}))}),[n,i,t,l,o])}(0,te.__decorate)([(0,oe.lF)(),(0,te.__metadata)("design:type",Function),(0,te.__metadata)("design:paramtypes",[Object,Number]),(0,te.__metadata)("design:returntype",void 0)],Be.prototype,"setStatusCode",null),(0,te.__decorate)([(0,oe.Qm)({payloadGetter:1}),(0,te.__metadata)("design:type",Function),(0,te.__metadata)("design:paramtypes",[le.y]),(0,te.__metadata)("design:returntype",void 0)],Be.prototype,"getVideoDetail",null),Be=(0,te.__decorate)([(0,ne.Y)("VideoPage"),(0,te.__metadata)("design:paramtypes",[Oe,Ee,he.G,p.h,De.q,ye])],Be);const Ze=()=>{var e;const{list:t,loading:i}=(0,r.mp)(p.h,{selector:e=>{var t;return null!==(t=e.video)&&void 0!==t?t:{list:[],loading:!0,statusCode:0}},dependencies:[]}),o=(0,r.mp)(Be,{selector:({statusCode:e})=>e,dependencies:[]}),{user:n}=null!==(e=(0,h.L)((()=>["user"]),[]))&&void 0!==e?e:{},a=(0,r.mp)(G.f,{selector:e=>{var t;return Number(null===(t=e.currentVideo)||void 0===t?void 0:t.index)},dependencies:[]}),l=t[a],s=(0,r.mp)(M.A,{selector:e=>e[null!=l?l:""],dependencies:[l]}),{showNotPass:d,takeDown:c,shareEnabled:u}=null!=s?s:{},{ftcUser:v}=null!=n?n:{},m=v&&!u,g=10101===o,x=!g&&(0!==o&&10404!==o&&10231!==o&&!(0,Y.m)(o)||10231===o&&!s||d||6===c||m);return{isServerError:g,isCommonError:x,isInitLoading:i&&!(null==t?void 0:t.length)&&!x,isEmpty:!(g||x||i||t.length)}},Re=()=>{const{id:e}=(0,l.UO)(),t=(0,r.qj)(p.h),i=(0,r.qj)(Be);return(0,a.useCallback)((()=>{t.resetItemList({key:"video"}),i.getVideoDetail({itemId:e})}),[t,e,i])};var ze=i(4139),Fe=i(27918);const Ve=(0,ze.Z)("div",{target:"elnrzms0"})((({theme:{direction:e},showVideoCommentDetail:t=!1})=>[(0,Fe.YJ)({direction:e,marginEnd:24,marginStart:t?24:0}),{width:t?"unset":"692px",maxWidth:t?"unset":"692px",padding:"24px 0",flex:t?"1 1 auto":""},(0,Fe.f1)({max:767,style:(0,Fe.YJ)({direction:e,marginStart:16})})]),"label:DivMainContainer;"),qe=(0,ze.Z)("div",{target:"elnrzms1"})({padding:"210px 0"},"label:DivErrorWrapper;"),We=(0,ze.Z)("h2",{target:"elnrzms2"})((({theme:e})=>[(0,Fe.GI)({theme:e,fontFamily:"Sofia",fontWeight:"bold",typography:"H3"}),(0,Fe.YJ)({direction:e.direction,marginStart:"-68px"}),{marginTop:"30px",color:e.colors.TextPrimary}]),"label:H2RecommendTitle;");var He=i(7915),Ae=i(99452),Ne=i(53048),Ue=i(24878),$e=i(85404),Ge=i(1160),Ye=i(88650),Je=i(90035),Qe=i(75546),Ke=i(22509),Xe=i(47127),et=i(38993),tt=i(87616),it=i(43683),ot=i(11838),nt=i(63092),rt=i(80537);const at=(0,ze.Z)("div",{target:"e17fzhrb0"})({display:"flex",flexDirection:"row",alignItems:"center",position:"relative",flex:"0 0 82px",width:"320px"},"label:DivInfoContainer;"),lt=(0,ze.Z)("span",{target:"e17fzhrb1"})((({theme:e})=>(0,Fe.GI)({theme:e,typography:"P1",fontWeight:"bold",fontFamily:"Sofia"})),"label:SpanUniqueId;");lt.defaultProps=Object.assign(Object.assign({},lt.defaultProps),{"data-e2e":"browse-username"});const st=(0,ze.Z)("span",{target:"e17fzhrb2"})((({theme:e})=>(0,Fe.GI)({theme:e,typography:"P3",fontFamily:"Proxima"})),{display:"flex",alignItems:"center","> span":Fe.wj},"label:SpanOtherInfos;");st.defaultProps=Object.assign(Object.assign({},st.defaultProps),{"data-e2e":"browser-nickname"});const dt=(0,ze.Z)(ot.D,{target:"e17fzhrb3"})(Fe.wj,Fe.gi,{flex:"1 1 auto",":hover":{[`${lt}`]:{textDecoration:"underline"}}},(({theme:{direction:e}})=>(0,Fe.YJ)({direction:e,marginEnd:"12px"})),"label:StyledLink;"),ct=({theme:{direction:e}})=>[{flex:"0 0 40px",":hover":{[`~ ${dt} ${lt}`]:{textDecoration:"underline"}}},(0,Fe.YJ)({direction:e,marginEnd:"12px"})],ut=(0,ze.Z)(rt.W,{target:"e17fzhrb6"})({justifySelf:"flex-end","& > svg":{marginRight:"6px"}},"label:StyledFollowButton;");ut.defaultProps=Object.assign(Object.assign({},ut.defaultProps),{"data-e2e":"browse-follow"});const vt=(0,a.memo)((function(e){const{uniqueId:t,videoId:i,teaParams:o}=e,l=(0,r.mp)(Ue.z,{selector:e=>e.users[t],dependencies:[t]}),{t:s,timeTranslator:d}=(0,$e.e)(),c=(0,r.mp)(M.A,{selector:e=>null==e?void 0:e[i],dependencies:[i]}),{secret:u,forFriend:v,createTime:p}=null!=c?c:{},{showing:m,handleCardEnter:h,handleCardLeave:g,handleItemEnter:x,handleItemLeave:f}=(0,Ge.V)(),b=(0,Ye.zW)(l),{isShowLive:w}=b;(0,Ye.TB)({isShowLive:w,reportTrigger:w,user:l,enterMethod:w?"video_head_browser":"creator",autoReport:!0,reportValidator:()=>void 0!==(null==l?void 0:l.relation),once:!0});const j=(0,Ye.CN)(Object.assign({user:l,enterMethod:w?"video_head_browser":"creator"},o)),y=(0,a.useMemo)((()=>Object.assign(Object.assign({},j),{author_id:j.to_user_id,group_id:i})),[j,i]),_=(0,a.useMemo)((()=>{if(l)return Object.assign(Object.assign({},j),{author_id:l.id,to_user_id:l.id,group_id:i,enterMethod:"creator"})}),[l,i,j]);if(!l)return(0,Je.G)(["authorInfo"]);const{nickname:k,secUid:C,verified:S}=l,I=function(e){return e?(0,ze.Z)(nt.G,{target:"e17fzhrb4"})(ct):(0,ze.Z)(ot.D,{target:"e17fzhrb5"})(ct)}(w);return(0,n.jsxs)(at,{children:[(0,n.jsx)(I,Object.assign({uniqueId:t,secUid:C,onMouseEnter:x,onMouseLeave:f,isInBrowserMode:!0,teaParams:y,"data-e2e":"browse-user-avatar",onClick:e.onClick,onLinkClick:e.onLinkClick},{children:(0,n.jsx)(Qe.k,Object.assign({needAnimation:!0,liveTheme:2,size:40},b),void 0)}),void 0),(0,n.jsxs)(dt,Object.assign({uniqueId:t,secUid:C,onMouseEnter:x,onMouseLeave:f,isInBrowserMode:!0,teaParams:_,onClick:e.onClick,onLinkClick:e.onLinkClick},{children:[(0,n.jsxs)(lt,{children:[t,S&&(0,n.jsx)(it.Q,{width:14,height:14,"data-e2e":"browse-bluev"},void 0)]},void 0),(0,n.jsx)("br",{},void 0),(0,n.jsxs)(st,{children:[k,(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",Object.assign({style:{margin:"0 4px"}},{children:" · "}),void 0),(0,n.jsx)("span",{children:d(1e3*Number(p))},void 0)]},void 0),u&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",Object.assign({style:{margin:"0 4px"}},{children:" · "}),void 0),(0,n.jsx)(He.Z,{width:16,height:16,style:{fill:"#121212",opacity:.5,margin:"0 4px"}},void 0),(0,n.jsx)("span",{children:s("video_label_private")},void 0)]},void 0),v&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:" · "},void 0),(0,n.jsx)(Ae.Z,{style:{margin:"0 4px"},width:20,height:20},void 0),(0,n.jsx)("span",Object.assign({className:"friend"},{children:s("Friends only")}),void 0)]},void 0)]},void 0)]}),void 0),(0,n.jsx)(pt,{author:l,video:c,videoReportParams:o},void 0),m&&(0,n.jsx)(Ke.C,{top:30,fixedLeft:32,onMouseEnter:h,onMouseLeave:g,uniqueId:t},void 0)]},void 0)})),pt=function({author:e,video:t,videoReportParams:i}){var o;const a=(0,r.mp)(he.G,{selector:t=>{var i,o;return(null===(o=null===(i=t.appContext)||void 0===i?void 0:i.user)||void 0===o?void 0:o.uniqueId)===e.uniqueId},dependencies:[e.uniqueId]}),l=(0,Xe.Q)({query:{enter_method:"click_follow"}}),{text:s,handleFollow:d,isFollowing:c,relation:u}=(0,A.w)({uniqueId:e.uniqueId,onNeedLogin:l,teaParams:Object.assign({group_id:null==t?void 0:t.id},i)});return(null==t?void 0:t.scheduleTime)?(0,n.jsx)(et.Q,{video:t},void 0):a?(0,n.jsx)(tt.C,{videoId:null!==(o=null==t?void 0:t.id)&&void 0!==o?o:""},void 0):(0,n.jsxs)(ut,Object.assign({size:"small",buttonTheme:c?"default":"primary",onClick:d},{children:[2===u?(0,n.jsx)(Ne.Z,{},void 0):null,s]}),void 0)};var mt,ht,gt=i(97446),xt=i(93583),ft=i(77015),bt=i(13761);function wt(){return wt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},wt.apply(this,arguments)}const jt=function(e){return a.createElement("svg",wt({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 48 48",width:"1em",height:"1em"},e),mt||(mt=a.createElement("g",{clipPath:"url(#default-avatar_svg__clip0_9489_175606)"},a.createElement("rect",{width:48,height:48,fill:"#D0D1D3",rx:24}),a.createElement("path",{fill:"#F3F3F3",fillRule:"evenodd",d:"M23.998 9.5a8.5 8.5 0 100 17 8.5 8.5 0 000-17zm0 19c-6.176 0-10.984 3.874-12.991 9.377-.49 1.343.543 2.66 1.871 2.66h22.239c1.328 0 2.361-1.317 1.87-2.661-2.008-5.499-6.812-9.376-12.989-9.376z",clipRule:"evenodd"}))),ht||(ht=a.createElement("defs",null,a.createElement("clipPath",{id:"default-avatar_svg__clip0_9489_175606"},a.createElement("rect",{width:48,height:48,fill:"white",rx:24})))))},yt=(0,ze.Z)("div",{target:"e1a7v7ak0"})({marginTop:"24px"},"label:DivCommentContainer;"),_t=(0,ze.Z)("p",{target:"e1a7v7ak1"})((({theme:e})=>(0,Fe.GI)({theme:e,fontWeight:"bold"})),{lineHeight:"26px",color:"#000000",fontSize:"18px"},"label:PCommentTitle;"),kt=(0,ze.Z)("div",{target:"e1a7v7ak2"})({display:"flex",marginTop:"16px"},"label:DivCommentBarContainer;"),Ct=(0,ze.Z)("div",{target:"e1a7v7ak3"})((({theme:e})=>[(0,Fe.YJ)({direction:e.direction,marginStart:"16px"}),{height:"48px",paddingBottom:"24px",borderBottom:"1px solid #F1F1F1",cursor:"pointer",flex:1,boxSizing:"content-box"}]),"label:DivBarWrapper;"),St=(0,ze.Z)("div",{target:"e1a7v7ak4"})((({theme:e})=>[(0,Fe.YJ)({direction:e.direction,marginStart:"16px"}),{paddingBottom:"24px",borderBottom:"1px solid #F1F1F1",cursor:"pointer",flex:1,boxSizing:"content-box"}]),"label:DivCommentInputWrapper;"),It=(0,ze.Z)("div",{target:"e1a7v7ak5"})((({theme:e})=>[(0,Fe.GI)({theme:e,typography:"P2",color:"TextSecondary"}),{flex:"1 1 0px",display:"flex",alignItems:"center",justifyContent:"center"}]),"label:DivErrorMessage;"),Lt=(0,ze.Z)(jt,{target:"e1a7v7ak6"})({width:"48px",height:"48px"},"label:StyledDefaultAvatar;"),Mt=(0,ze.Z)("div",{target:"e1a7v7ak7"})((({theme:e})=>(0,Fe.YJ)({direction:e.direction,marginStart:"16px"})),{lineHeight:"24px",display:"flex",alignItems:"center"},"label:DivDisabledTip;"),Tt=(0,a.memo)((({isCommentDisabled:e,authorId:t,itemId:i,teaParams:o})=>{var r,l;const{user:s}=null!==(r=(0,h.L)((()=>["user"]),[]))&&void 0!==r?r:{},d=Boolean(s),c=(0,u.Q)(),{nickname:v=""}=null!==(l=(0,A.p)(t))&&void 0!==l?l:{},{isBrowserModeShowing:p}=(0,a.useContext)(D._),m=(0,Xe.Q)(),g=(0,a.useMemo)((()=>p?null:(0,n.jsx)(xt._,{itemId:i,teaParams:o},void 0)),[p,i,o]);return(0,n.jsxs)(kt,{children:[d?(0,n.jsx)(bt.q,{size:40,src:null==s?void 0:s.avatarUri[0]},void 0):(0,n.jsx)(Lt,{},void 0),d?e?(0,n.jsx)(Mt,{children:c("comment_disable_notfollow").replace("%@",v)},void 0):(0,n.jsx)(St,{children:g},void 0):(0,n.jsx)(Ct,Object.assign({onClick:m},{children:(0,n.jsx)(ft.Vk,{children:c("video_details_page_comment_field_cta")},void 0)}),void 0)]},void 0)})),Dt=(0,a.memo)((0,a.forwardRef)((function(e,t){var i,o;const{itemId:l="",teaParams:s,scheduleTime:d=""}=e,c=(0,u.Q)(),{user:v}=null!==(i=(0,h.L)((()=>["user"]),[]))&&void 0!==i?i:{},[p]=(0,r.b7)(M.A,{selector:e=>e[null!=l?l:""],dependencies:[l]}),{loading:g,comments:x,hasMore:f}=(0,r.mp)(I.x),b=(0,A.p)(null==p?void 0:p.author),w=(0,a.useMemo)((()=>3===(null==p?void 0:p.itemCommentStatus)||3===(null==b?void 0:b.commentSetting)),[null==b?void 0:b.commentSetting,null==p?void 0:p.itemCommentStatus]),j=(0,a.useMemo)((()=>(0,m.sA)(b,null==v?void 0:v.uid)),[b,null==v?void 0:v.uid]),{stats:y}=null!=p?p:{},_=g&&!x.length&&f,k=null!==(o=null==y?void 0:y.commentCount)&&void 0!==o?o:0,C=c("video_details_page_comment_header",{num:k<=1?1:k,Count:(0,m.BT)(k)});return d?(0,n.jsx)(yt,{children:(0,n.jsx)(It,{children:c("scheduled_video_comment_unavailable")},void 0)},void 0):(0,n.jsxs)(yt,Object.assign({ref:t},{children:[_?null:(0,n.jsx)(_t,{children:C},void 0),_?null:(0,n.jsx)(Tt,{teaParams:s,itemId:l,authorId:null==p?void 0:p.author,isCommentDisabled:j},void 0),w?(0,n.jsx)(It,Object.assign({"data-e2e":"comment-turned-off"},{children:c("comment_off")}),void 0):(0,n.jsx)(gt.$,{hasMore:f,inDetailPage:!0,itemId:l,disableReply:j,teaParams:s},void 0)]}),void 0)})));var Ot,Et=i(93328),Bt=i(67862),Pt=i(13964),Zt=i(88671);function Rt({relatedList:e,isNarrowState:t,onLoadMore:i,hasMore:o,isLoading:n}){const[r,l]=(0,a.useState)(1),[s,d]=(0,a.useState)(!0),{shouldUseRelatedVideo:c}=(0,j.e6)();return(0,a.useEffect)((()=>{t&&(l(1),d(!0))}),[t]),(0,a.useEffect)((()=>{t&&d(!!c||(null!=n?n:e.length>16*r))}),[e.length,t,r,n,c]),{narrowStateHasMore:s,handleLoadMore:(0,a.useCallback)((()=>{e.length-16*(r+1)<0&&o&&i(),l(r+1)}),[i,e,r,o]),narrowStateList:(0,a.useMemo)((()=>e.slice(0,16*r)),[e,r])}}!function(e){e[e.Null=0]="Null",e[e.Close=1]="Close",e[e.Redirect=2]="Redirect"}(Ot||(Ot={}));var zt=i(58942);const Ft=(0,ze.Z)("div",{target:"ege8lhx0"})({},"label:DivVideoDetailContainer;"),Vt=(0,ze.Z)("div",{target:"ege8lhx1"})({height:0,width:"1px",position:"absolute",marginTop:"-84px"},"label:DivEmptyWrapper;"),qt=(0,ze.Z)("div",{target:"ege8lhx2"})({height:"48px",fontSize:"24px",color:"#000000",display:"flex",marginBottom:"16px"},"label:DivBackHead;"),Wt=(0,ze.Z)("div",{target:"ege8lhx3"})({fontSize:"24px",color:"#000000",display:"flex",cursor:"pointer",alignItems:"center"},"label:DivHeadContent;"),Ht=(0,ze.Z)(zt.Z,{target:"ege8lhx4"})((({theme:e})=>[(0,Fe.YJ)({direction:e.direction,marginStart:"14px"}),{transform:"rtl"===e.direction?"rotate(180deg)":""}]),"label:StyledChevronLeftOffset;"),At=(0,ze.Z)("span",{target:"ege8lhx5"})((({theme:e})=>[(0,Fe.YJ)({direction:e.direction,marginStart:"4px"}),{lineHeight:"48px",fontSize:"16px",color:"#000000"}]),"label:SpanBackTitle;"),Nt=(0,ze.Z)("div",{target:"ege8lhx6"})({display:"flex"},"label:DivContentContainer;"),Ut=(0,ze.Z)("div",{target:"ege8lhx7"})((({theme:e})=>[(0,Fe.YJ)({direction:e.direction,marginEnd:"24px"}),{flex:"1 1 808px"}]),"label:DivLeftContainer;"),$t=(0,ze.Z)("div",{target:"ege8lhx8"})({padding:"16px 0",borderBottom:"1px solid #F1F1F1"},"label:DivAuthorContainer;"),Gt=(0,ze.Z)("div",{target:"ege8lhx9"})({width:"322px",flex:"0 0 322px"},"label:DivVideoList;"),Yt=(0,ze.Z)("p",{target:"ege8lhx10"})((({theme:e})=>(0,Fe.GI)({theme:e,fontWeight:"semiBold"})),Fe.wj,{color:"#161823",fontSize:"18px",marginBottom:"15px",lineHeight:"24px"},"label:PVideoListTitle;"),Jt=(0,ze.Z)("div",{target:"ege8lhx11"})({width:"100%",height:"606px",background:"rgba(18, 18, 18, 0.03)",position:"relative",overflow:"hidden",borderRadius:"4px",marginBottom:"24px"},"label:DivVideoContentSkeleton;");var Qt,Kt,Xt=i(32222),ei=i.n(Xt),ti=i(10282),ii=i(62321),oi=i(91497);function ni(){return ni=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},ni.apply(this,arguments)}const ri=function(e){return a.createElement("svg",ni({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},e),Qt||(Qt=a.createElement("path",{fill:"#161823",fillRule:"evenodd",d:"M3 4a2 2 0 012-2h14a2 2 0 012 2v16a2 2 0 01-2 2H5a2 2 0 01-2-2V4zm16 0H5v16h14V4z",clipRule:"evenodd"})),Kt||(Kt=a.createElement("path",{fill:"#161823",fillRule:"evenodd",d:"M8 7.5a.5.5 0 01.5-.5h7a.5.5 0 01.5.5v1a.5.5 0 01-.5.5h-7a.5.5 0 01-.5-.5v-1zm0 4a.5.5 0 01.5-.5h7a.5.5 0 01.5.5v1a.5.5 0 01-.5.5h-7a.5.5 0 01-.5-.5v-1zm.5 3.5a.5.5 0 00-.5.5v1a.5.5 0 00.5.5h4a.5.5 0 00.5-.5v-1a.5.5 0 00-.5-.5h-4z",clipRule:"evenodd"})))};var ai;!function(e){e.CloseTranscriptPanel="close_transcript_panel",e.ClickTranscriptLine="click_transcript_line",e.ShowTranscriptPanel="show_transcript_panel"}(ai||(ai={}));const li=(e,t)=>{Z.W.event("close_transcript_panel",{enter_method:e,is_pinned:t})},si=(e,t)=>{Z.W.event("show_transcript_panel",{enter_method:e,is_pinned:t})};var di=i(8609);const ci=(0,ze.Z)("div",{target:"ejx52ff0"})((({theme:{direction:e,colors:t}})=>[(0,Fe.YJ)({direction:e,paddingStart:16,paddingEnd:8}),{height:40,background:t.BGCreation3,opacity:.88,display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer"}]),"label:DivTranscriptHeader;"),ui=(0,ze.Z)("span",{target:"ejx52ff1"})((({theme:{direction:e}})=>[(0,Fe.YJ)({direction:e,marginStart:8}),{fontWeight:600,fontSize:"16px",flex:1}]),"label:SpanHeadertext;"),vi=(0,ze.Z)(di.Z,{target:"ejx52ff2"})((({reversed:e})=>[{width:"16px",height:"16px",verticalAlign:"middle",transform:e?"rotate(180deg)":"none"}]),"label:StyledChevronDownFill;"),pi=(0,ze.Z)("ul",{target:"ejx52ff3"})((({theme:{colors:e},isShow:t})=>[{fontWeight:400,fontSize:"14px",listStyleType:"none",padding:"0 0 16px 0",marginBottom:24,marginTop:0,background:e.BGPlaceholderOpaque,display:t?"block":"none",maxHeight:432,overflow:"auto",position:"relative"}]),"label:UlTranscriptList;"),mi=(0,ze.Z)("li",{target:"ejx52ff4"})((({theme:{direction:e,colors:t},isCurrent:i,isRTL:o})=>[{minHeight:38,padding:"8px 16px",display:"flex",cursor:"pointer",":hover":{backgroundColor:t.BGCreation3}},i?Object.assign({backgroundColor:t.BGCreation3,borderRight:o?`4px solid ${t.Primary}`:"",borderLeft:o?"":`4px solid ${t.Primary}`},(0,Fe.YJ)({direction:e,paddingStart:"12px"})):{}]),"label:LiTranscriptItem;"),hi=(0,ze.Z)("div",{target:"ejx52ff5"})((({theme:{direction:e,colors:t}})=>[(0,Fe.YJ)({direction:e,marginEnd:16}),{color:t.ConstBGInverse}]),"label:DivTranscriptTime;"),gi=(0,ze.Z)("div",{target:"ejx52ff6"})((({theme:{colors:e}})=>[{color:e.Primary2,wordWrap:"break-word",wordBreak:"break-word"}]),"label:DivTranscriptText;"),xi=(0,ze.Z)("div",{target:"ejx52ff7"})((({theme:{colors:e}})=>[{height:1,backgroundColor:e.BGPlaceholderOpaque,marginBottom:24}]),"label:DivSplitLine;"),fi=(0,ze.Z)("div",{target:"ejx52ff8"})({cursor:"pointer"},"label:DivCloseIconContainer;"),bi=(0,a.memo)((function({item:e,onSeek:t,isNarrow:i,isListShow:o,setIsListShow:l}){const{id:s}=e,[{subtitleContent:d},c]=(0,r.b7)(ye),v=(0,a.useRef)(0),p=(0,a.useRef)(!1),m=(0,a.useMemo)((()=>{const e=ei()(d);return e[0].start>=1&&e.unshift({end:0,start:0,startStr:"00:00",text:""}),e}),[d]),[{currentTime:h}]=(0,r.b7)(ii.M,{selector:e=>e[s]?e[s]:{duration:0,videoPercent:0,currentTime:0},dependencies:[s]}),{isDefaultExpanded:g,isShowCloseIcon:x}=(0,j.II)(),{isRTL:f}=(0,oi.Y)(),b=(0,a.useRef)(null),w=(0,a.useCallback)((()=>{x||(o?(li("expand_panel",g?1:0),l(!1)):(si("expand_panel",g?1:0),l(!0)))}),[o,x,g,l]),y=(0,a.useCallback)((e=>{var i;t(e),i=e,Z.W.event("click_transcript_line",{time_clicked:i})}),[t]),_=(0,a.useCallback)((()=>{li("click_transcript",0),c.setIfShowSubtitle(!1)}),[c]),k=(0,a.useCallback)((e=>{var t,i,o,n,r,a,l,s;if(p.current)return;const d=null===(i=null===(t=null==b?void 0:b.current)||void 0===t?void 0:t.children)||void 0===i?void 0:i[e],c=null==d?void 0:d.offsetTop,u=null===(o=null==b?void 0:b.current)||void 0===o?void 0:o.scrollTop,v=null==d?void 0:d.clientHeight,m=c-u,h=m<432&&m>-v;if(e>2){const t=null===(a=null===(r=null===(n=null==b?void 0:b.current)||void 0===n?void 0:n.children)||void 0===r?void 0:r[e-2])||void 0===a?void 0:a.offsetTop;null===(l=null==b?void 0:b.current)||void 0===l||l.scrollTo({top:t,behavior:"smooth"})}else h||null===(s=null==b?void 0:b.current)||void 0===s||s.scrollTo({top:0,behavior:"smooth"})}),[b,p]),C=(0,a.useCallback)((()=>{p.current=!0}),[p]),S=(0,a.useCallback)((()=>{p.current=!1}),[p]),I=(0,a.useCallback)((()=>{var e;let t=0;for(let i=m.length-1;i>=0;i--)if(m[i].start<=h||h>(null===(e=null==m?void 0:m[i-1])||void 0===e?void 0:e.end)&&Math.abs(m[i].start-h)<.001){t=i,v.current!==i&&(v.current=i,k(i));break}return m.map(((e,i)=>(0,n.jsxs)(mi,Object.assign({isCurrent:t===i,onClick:()=>y(e.start),isRTL:f},{children:[(0,n.jsx)(hi,{children:e.startStr},void 0),(0,n.jsx)(gi,{children:e.text},void 0)]}),i)))}),[m,h,y,f,k]),L=(0,u.Q)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",Object.assign({style:{marginTop:i?"32px":0}},{children:[(0,n.jsxs)(ci,Object.assign({onClick:w,style:{cursor:x?"auto":"point"}},{children:[(0,n.jsx)(ri,{},void 0),(0,n.jsx)(ui,{children:L("asr_transcript_onpc_kebab_menu_ab_transcript_button")},void 0),x?(0,n.jsx)(fi,Object.assign({onClick:_},{children:(0,n.jsx)(ti.Z,{height:12,width:12},void 0)}),void 0):(0,n.jsx)(vi,{reversed:o},void 0)]}),void 0),(0,n.jsx)(pi,Object.assign({isShow:o,ref:b,onMouseEnter:C,onMouseLeave:S},{children:I()}),void 0)]}),void 0),(0,n.jsx)(xi,{},void 0)]},void 0)})),wi=(0,ze.Z)("div",{target:"e1y973ys0"})({display:"flex",width:"100%",flexWrap:"wrap"},"label:DivVideoCardSkeletonContainer;"),ji=(0,ze.Z)("div",{target:"e1y973ys1"})({width:"100%",height:"120px",marginBottom:"16px",background:"rgba(18, 18, 18, 0.03)",borderRadius:"2px"},"label:DivCardH;"),yi=(0,ze.Z)("div",{target:"e1y973ys2"})({width:"147px",height:"202px",marginBottom:"16px",background:"rgba(18, 18, 18, 0.03)",borderRadius:"2px",marginRight:"14px"},"label:DivCard;"),_i=(0,a.memo)((function(){return(0,n.jsxs)(wi,{children:[(0,n.jsx)(yi,{},void 0),(0,n.jsx)(yi,{},void 0),(0,n.jsx)(yi,{},void 0),(0,n.jsx)(yi,{},void 0),(0,n.jsx)(yi,{},void 0),(0,n.jsx)(yi,{},void 0)]},void 0)})),ki=(0,a.memo)((function(){return(0,n.jsxs)(wi,{children:[(0,n.jsx)(ji,{},void 0),(0,n.jsx)(ji,{},void 0),(0,n.jsx)(ji,{},void 0),(0,n.jsx)(ji,{},void 0),(0,n.jsx)(ji,{},void 0),(0,n.jsx)(ji,{},void 0)]},void 0)}));var Ci=i(79439),Si=i(14452),Ii=i(15073),Li=i(23855),Mi=i(46562),Ti=i(56344),Di=i(57354),Oi=i(96207),Ei=i(57462),Bi=i(99727),Pi=i(12285),Zi=i(3451),Ri=i(15854),zi=i(67186),Fi=i(85311),Vi=i(12765),qi=i(31444),Wi=i(44401),Hi=i(12886),Ai=i(36761),Ni=i(32045),Ui=i(34447),$i=i(79489),Gi=i(58500),Yi=i(17936),Ji=i(12305),Qi=i(80201),Ki=i(3624);i(20935),i(34249),(0,Ki.F4)({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),(0,Ki.F4)({"0%":{opacity:0,transform:"translate3d(.5em, calc(1 * .2em), 0) rotate(calc(1 * 20deg)) scale(.6)"},"20%":{opacity:.6,transform:"translate3d(.3em, calc(1 * 0), 0) rotate(calc(1 * 40deg)) scale(.8)"},"40%":{opacity:1,transform:"translate3d(.1em, calc(1 * -.2em), 0) rotate(calc(1 * 60deg)) scale(1)"},"60%":{transform:"translate3d(-.1em, calc(1 * -.4em), 0) rotate(calc(1 * 80deg))"},"80%":{opacity:.8,transform:"translate3d(-.2em, 1 * -.6em, 0) rotate(1 * 100deg)"},"100%":{opacity:0,transform:"translate3d(-.3em, calc(1 * -.8em), 0) rotate(calc(1 * 120deg))"}}),(0,Ki.F4)({"0%":{opacity:0,transform:"translate3d(.5em,calc(2 * .2em), 0) rotate(calc(2 * 20deg)) scale(.6)"},"20%":{opacity:.6,transform:"translate3d(.3em, calc(2 * 0), 0) rotate(calc(2 * 40deg)) scale(.8)"},"40%":{opacity:1,transform:"translate3d(.1em, calc(2 * -.2em), 0) rotate(calc(2 * 60deg)) scale(1)"},"60%":{transform:"translate3d(-.1em, calc(2 * -.4em), 0) rotate(calc(2 * 80deg))"},"80%":{opacity:.8,transform:"translate3d(-.2em, calc(2 * -.6em), 0) rotate(calc(2 * 100deg))"},"100%":{opacity:0,transform:"translate3d(-.3em, calc(2 * -.8em), 0) rotate(calc(2 * 120deg))"}}),(0,Ki.F4)({"0%":{opacity:0,transform:"translate3d(.5em, calc(3 * .2em), 0) rotate(calc(3 * 20deg)) scale(.6)"},"20%":{opacity:.6,transform:"translate3d(.3em, calc(3 * 0), 0) rotate(calc(3 * 40deg)) scale(.8)"},"40%":{opacity:1,transform:"translate3d(.1em, calc(3 * -.2em), 0) rotate(calc(3 * 60deg)) scale(1)"},"60%":{transform:"translate3d(-.1em, calc(3 * -.4em), 0) rotate(calc(3 * 80deg))"},"80%":{opacity:.8,transform:"translate3d(-.2em, calc(3 * -.6em), 0) rotate(calc(3 * 100deg))"},"100%":{opacity:0,transform:"translate3d(-.3em, calc(3 * -.8em), 0) rotate(calc(3 * 120deg))"}});const Xi=(0,ze.Z)("div",{target:"ean6quk0"})((({theme:e})=>(0,Fe.YJ)({direction:e.direction,end:"20px"})),(({needExtraBottom:e=!1})=>({display:"flex",flexDirection:"column",alignItems:"center",position:"absolute",top:e?"315px":"375px"})),"label:DivActionItemContainer;"),eo=((0,Ki.F4)({"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.67)"},"100%":{transform:"scale(1)"}}),(0,ze.Z)("div",{target:"ean6quk5"})((({theme:e})=>[(0,Fe.GI)({theme:e,fontWeight:"semiBold",typography:"P2"}),{width:"280px",padding:"8px 0px",maxHeight:"490px",overflowY:"auto","::-webkit-scrollbar-thumb":{background:e.colors.SDTertiary}}]),"label:DivShareWrapper;"));eo.defaultProps=Object.assign(Object.assign({},eo.defaultProps),{"data-e2e":"feed-share-group"});const to=(0,ze.Z)("svg",{target:"ean6quk12"})((({theme:{direction:e}})=>(0,Fe.YJ)({direction:e,marginEnd:"5px"})),{verticalAlign:"middle"},"label:SvgIconFlag;"),io=(0,ze.Z)("div",{target:"ean6quk13"})((({theme:e})=>[(0,Fe.GI)({theme:e,fontWeight:"semiBold",typography:"P2",color:"TextPrimary"}),{width:"280px",height:"58px",display:"flex",alignItems:"center",padding:"16px",boxSizing:"border-box",cursor:"pointer"}]),"label:DivEleWrapper;"),oo=(0,ze.Z)(ri,{target:"ean6quk14"})((({theme:{direction:e}})=>[(0,Fe.YJ)({direction:e,marginEnd:"4px"})]),"label:StyledTranscriptIcon;"),no="#fff",ro="#161823",ao={flexDirection:"row",position:"relative",top:0,right:0,width:"100%",height:"40px",paddingBottom:"24px",boxSizing:"content-box",borderBottom:"1px solid #F1F1F1"},lo=(0,a.memo)((function(e){const{itemId:t,style:i,onClickLike:o,onClickShare:l,onClickComment:s,isHorizontal:d=!1,needExtraBottom:c=!1}=e,v=(0,u.Q)(),{isRTL:p}=(0,oi.Y)(),[h,g]=(0,a.useState)(0),x=p?"rightBottom":"leftBottom",f=(0,a.useMemo)((()=>({offset:[p?20:-20,10*Math.min(h,10)]})),[p,h]),b=(0,a.useMemo)((()=>({maxWidth:"unset",filter:"drop-shadow(0px 2px 12px rgba(0, 0, 0, 0.12))"})),[]),w=(0,a.useMemo)((()=>({padding:"0 4px"})),[]),y=p?"right":"left",_=(0,a.useMemo)((()=>({offset:[p?20:-20]})),[p]),[k={},C]=(0,r.b7)(M.A,{selector:e=>e[t],dependencies:[t]}),[{subtitleContent:S},I]=(0,r.b7)(ye),{author:L="",id:T="",digged:D=!1}=(0,m.m7)(k),O=(0,r.mp)(Ue.z,{selector:e=>{if(L)return e.users[L]},dependencies:[k]}),{secUid:E="",uniqueId:B="",id:P=""}=(0,m.m7)(O),R=(0,Xe.X)({action:(0,a.useCallback)((()=>{null==o||o(),C.postLikeVideo({id:t,enter_method:"click",play_mode:"video_detail"})}),[C,t,o]),modalConfig:{query:{enter_method:"click_like"}}}),z=(0,V.fz)($i.p),[F,q]=(0,a.useState)(!1),[W,H]=(0,a.useState)(!1),[A,U]=(0,a.useState)(!1),[$,G]=(0,a.useState)(!1),Y=(0,a.useRef)(0),J=(0,a.useRef)(0),Q=(0,a.useRef)(0),K=(0,a.useRef)(0),{expanded:X}=(0,Wi.c1)(),ee=(0,a.useCallback)((()=>{var e,i;A||(q(!F),z.handleClickShare({author_id:null!==(e=null==O?void 0:O.id)&&void 0!==e?e:"",to_user_id:null!==(i=null==O?void 0:O.id)&&void 0!==i?i:"",group_id:t,play_mode:"video_detail"})),null==l||l()}),[A,l,F,z,null==O?void 0:O.id,t]),te=(0,a.useCallback)((()=>{var e;z.handleSharePanelShow({group_id:t,to_user_id:null!==(e=null==O?void 0:O.id)&&void 0!==e?e:"",play_mode:"video_detail",share_option_type:X}),window.clearTimeout(Y.current),window.setTimeout((()=>{q(!0)}),100)}),[X,t,z,null==O?void 0:O.id]),ie=(0,a.useCallback)((()=>{A||(window.clearTimeout(Q.current),Y.current=window.setTimeout((()=>{q(!1)}),300))}),[A]),oe=(0,a.useCallback)((()=>{var e;e={group_id:t},Z.W.event("kebab_menu_hover",e),window.clearTimeout(J.current),K.current=window.setTimeout((()=>{H(!0)}),100)}),[t]),ne=(0,a.useCallback)((()=>{window.clearTimeout(K.current),J.current=window.setTimeout((()=>{H(!1)}),300)}),[]),re=(0,a.useCallback)((e=>{U(e)}),[]),ae=(0,a.useCallback)((()=>{G(!0)}),[G]),le=(0,Hi.V)(t),se=(0,Wi.JW)();(0,a.useEffect)((()=>{se()}),[se]);const de=(0,Ai.Q)({item:k,play_mode:"video_detail",onShow:Pt.NS}),ce=(0,a.useMemo)((()=>(0,n.jsxs)(io,Object.assign({onMouseEnter:oe,onMouseLeave:ne,onClick:de},{children:[(0,n.jsx)(to,Object.assign({viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",width:16,height:15},{children:(0,n.jsx)("use",{xlinkHref:"#svg-flag"},void 0)}),void 0),v("Report")]}),void 0)),[oe,ne,de,v]),ue=(0,a.useCallback)((()=>{I.setIfShowSubtitle(!0),si("click_transcript",0)}),[I]),{isInActionBar:ve}=(0,j.II)(),pe=(0,a.useMemo)((()=>(0,n.jsxs)(io,Object.assign({onMouseEnter:oe,onMouseLeave:ne,onClick:ue},{children:[(0,n.jsx)(oo,{},void 0),v("asr_transcript_onpc_kebab_menu_ab_transcript_button")]}),void 0)),[oe,ne,ue,v]),me=(0,a.useCallback)((()=>(0,n.jsxs)(n.Fragment,{children:[ve&&(null==S?void 0:S.length)>0?pe:null,ce]},void 0)),[S,ve,pe,ce]),he=(0,a.useMemo)((()=>({group_id:t,to_user_id:P,author_id:P,play_mode:"video_detail"})),[t,P]),ge=(0,a.useMemo)((()=>d?24:32),[d]),xe=(0,a.useMemo)((()=>(0,n.jsx)(Ri.Z,{width:ge,height:ge,fill:d?ro:no},void 0)),[d,ge]),fe=(0,a.useMemo)((()=>(0,n.jsx)(zi.Z,{width:ge,height:ge,fill:d?ro:no},void 0)),[d,ge]),be=(0,a.useMemo)((()=>(0,n.jsx)(Fi.Z,{width:ge,height:ge,fill:d?ro:no},void 0)),[d,ge]),we=(0,a.useMemo)((()=>(0,n.jsx)(Vi.Z,{width:ge,height:ge,fill:d?ro:no},void 0)),[d,ge]),je=(0,a.useMemo)((()=>(0,n.jsx)(qi.Z,{width:ge,height:ge,fill:d?ro:no},void 0)),[d,ge]),_e=(0,a.useMemo)((()=>(0,n.jsx)(Qi.Z,{isLiked:D,likedIcon:xe,unlikeIcon:je},void 0)),[D,je,xe]),{stats:ke,id:Ce}=(0,m.m7)(k),Se=`https://www.tiktok.com${(0,N.fH)({uniqueId:B,secUid:E,videoId:Ce})}`,Ie=(0,a.useMemo)((()=>(0,n.jsx)(eo,Object.assign({onMouseEnter:te,onMouseLeave:ie},{children:(0,n.jsx)(Ni.mB,{mode:1,videoId:T,url:Se,embedCode:le,enabled:k.shareEnabled,teaParams:he,onPlatformCountChange:g,onOtherModalOpen:re,onSendMessagePanelOpen:ae},void 0)}),void 0)),[le,re,ae,te,ie,k.shareEnabled,he,Se,T]),Le=(0,a.useCallback)((()=>{G(!1)}),[G]),Me=(0,Xe.X)({action:(0,a.useCallback)((()=>{Gi.y.handleCommentClick(Object.assign(Object.assign({},he),{action:"open"})),null==s||s()}),[s,he]),modalConfig:{query:{enter_method:"click_comment"}}}),Te=(0,a.useMemo)((()=>{const e={position:"absolute",top:"4px",transform:"rotate(-90deg)",opacity:"0.9"};return p?e.left=0:e.right=0,e}),[p]);if(!k)return(0,Je.G)(["item"]);const De=d?Object.assign(Object.assign({},i),ao):i;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(Xi,Object.assign({needExtraBottom:c,style:De},{children:[(0,n.jsx)(Ji.i,{text:(0,m.BT)(null==ke?void 0:ke.diggCount),Icon:_e,onClick:R,e2eTag:"like",normalText:!0,isHorizontal:d},void 0),(0,n.jsx)(Ji.i,{text:(0,m.BT)(null==ke?void 0:ke.commentCount),Icon:fe,onClick:Me,e2eTag:"comment",normalText:!0,isHorizontal:d},void 0),(0,n.jsx)(Yi.u,Object.assign({destroyTooltipOnHide:!0,visible:F,placement:x,overlay:Ie,align:f,overlayStyle:b,overlayInnerStyle:w,tooltipTheme:"white",zIndex:999},{children:(0,n.jsx)(Ji.i,{text:(null==ke?void 0:ke.shareCount)?(0,m.BT)(null==ke?void 0:ke.shareCount):v("Share"),Icon:we,onMouseEnter:te,onMouseLeave:ie,onClick:ee,e2eTag:"share",normalText:!0,isHorizontal:d},void 0)}),void 0),(0,n.jsx)(Yi.u,Object.assign({visible:W,placement:y,align:_,overlay:me(),overlayStyle:b,overlayInnerStyle:w,tooltipTheme:"white",zIndex:999},{children:(0,n.jsx)(Ji.i,{onMouseEnter:oe,onMouseLeave:ne,Icon:be,e2eTag:"more-entrance",style:d?Te:void 0},void 0)}),void 0)]}),void 0),$&&(0,n.jsx)(Ui.J,{visible:$,videoId:Ce,onClose:Le},void 0)]},void 0)}));var so,co,uo=i(74820),vo=i(94582),po=i(87821),mo=i(33527),ho=i(60622),go=i(75595),xo=i(76679),fo=i(51347);function bo(){return bo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},bo.apply(this,arguments)}const wo=function(e){return a.createElement("svg",bo({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},e),so||(so=a.createElement("g",{fill:"white",fillRule:"evenodd",clipPath:"url(#expand_svg__clip0_9489_175555)",clipRule:"evenodd"},a.createElement("path",{d:"M10.88 3.88a.5.5 0 01.5-.5h8.37a1 1 0 011 1v8.37a.5.5 0 01-.5.5h-1a.5.5 0 01-.5-.5V5.38h-7.37a.5.5 0 01-.5-.5v-1zM13.37 20a.5.5 0 01-.5.5H4.5a1 1 0 01-1-1v-8.37a.5.5 0 01.5-.5h1a.5.5 0 01.5.5v7.37h7.37a.5.5 0 01.5.5v1z"}))),co||(co=a.createElement("defs",null,a.createElement("clipPath",{id:"expand_svg__clip0_9489_175555"},a.createElement("path",{fill:"white",d:"M0 0h24v24H0z"})))))},jo=(0,ze.Z)("div",{target:"e123m2eu0"})({width:"100%",position:"absolute",bottom:"0"},"label:DivSeekBarContainer;"),yo=(0,ze.Z)("div",{target:"e123m2eu1"})({maxWidth:"64px",marginInlineStart:"8px",fontSize:"14px",lineHeight:"20px",color:"#ffffff",textAlign:"end",whiteSpace:"nowrap",fontFeatureSettings:'"tnum"',fontVariantNumeric:"tabular-nums",fontFamily:"Tahoma, PingFangSC, sans-serif"},"label:DivSeekBarTimeContainer;"),_o=(0,ze.Z)("div",{target:"e123m2eu2"})({height:"4px",width:"100%",backgroundColor:"rgba(255, 255, 255, 0.2)",position:"absolute",left:"0",bottom:"0",cursor:"pointer"},"label:DivSeekBarProgress;"),ko=(0,ze.Z)("div",{target:"e123m2eu3"})((({theme:{colors:e,direction:t}})=>({height:"4px",width:"100%",backgroundColor:e.Primary,position:"absolute",bottom:"0",cursor:"pointer",borderBottomLeftRadius:"rtl"===t?"0":"4px",borderBottomRightRadius:"rtl"===t?"4px":"0",transformOrigin:"rtl"===t?"right":"left"})),"label:DivSeekBar;"),Co=(0,ze.Z)("div",{target:"e123m2eu4"})((({theme:{direction:e}})=>(0,Fe.YJ)({direction:e})),(({theme:{direction:e}})=>({display:"none",width:"18px",height:"18px",position:"absolute",zIndex:10,bottom:0,transform:`translate(${"rtl"===e?"50%":"-50%"}, 6px)`,cursor:"pointer"})),"label:DivSeekBarCircleWrapper;"),So=(0,ze.Z)("div",{target:"e123m2eu5"})((({theme:{direction:e,colors:t}})=>[(0,Fe.YJ)({direction:e,start:"3px"}),{width:"12px",height:"12px",backgroundColor:"#ffffff",borderRadius:"12px",position:"absolute",zIndex:10,bottom:"3px",boxShadow:`0px 0px 3px ${t.TextPrimary}`}]),"label:DivSeekBarCircle;"),Io=(0,ze.Z)("div",{target:"e123m2eu6"})((({needExtraBottom:e=!1})=>({width:"100%",position:"absolute",userSelect:"none",height:e?"calc(100% - 60px)":"100%",opacity:1,bottom:e?"60px":"0",cursor:"initial",display:"flex",flexDirection:"column",[`:hover ${Co}`]:{display:"block"},[`:hover ${ko}, :hover ${_o}`]:{height:"6px"}})),"label:DivVideoControlContainer;"),Lo=(0,ze.Z)("div",{target:"e123m2eu7"})((({active:e})=>[{position:"absolute",width:"100%",display:"flex",alignItems:"center",paddingInlineStart:"16px",bottom:"22px",opacity:e?"1":"0",transition:"all .3s ease"}]),"label:DivControlButtonWrapper;"),Mo=(0,ze.Z)("div",{target:"e123m2eu8"})((({theme:{direction:e},active:t,showActionBar:i})=>[{position:"absolute",cursor:"pointer",bottom:"20px",display:"flex",flexDirection:"column",alignItems:"center",opacity:t?"1":"0",transition:"opacity .5s"},(0,Fe.YJ)({direction:e,start:"unset",end:i?"72px":"16px"})]),"label:DivVoiceControlContainer;"),To=(0,ze.Z)("div",{target:"e123m2eu9"})({opacity:1,width:"40px",height:"24px",display:"flex",justifyContent:"center",transition:"opacity .3s"},"label:DivMuteIconContainer;"),Do=(0,ze.Z)("div",{target:"e123m2eu10"})({width:"24px",height:"24px",display:"flex",justifyContent:"center",cursor:"pointer"},"label:DivPlayIconContainer;"),Oo=(0,ze.Z)(wo,{target:"e123m2eu11"})((({theme:{direction:e},active:t,showActionBar:i})=>[{position:"absolute",cursor:"pointer",bottom:"20px",width:"24px",height:"24px",alignItems:"center",opacity:t?"1":"0",transition:"opacity .5s"},(0,Fe.YJ)({direction:e,start:"unset",end:i?"116px":"60px"})]),"label:StyledExpand;"),Eo={width:24,height:24,fill:"#fff"},Bo=(0,a.memo)((function(e){const t=(0,a.useRef)(null),i=(0,a.useRef)(null),o=(0,a.useRef)(null),l=(0,a.useRef)(null),[s,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)(!1),[v,p]=(0,a.useState)(!1),[m,h]=(0,a.useState)(!1),{direction:g}=(0,uo.u)(),x=(0,a.useRef)(0),f=(0,a.useRef)(null),{videoId:b,pause:w=!1,seek:j,videoRef:y,progressReportCallback:_,progressPreviewReportCallback:k,onGoBrowserMode:C,onDoubleClick:S,onTogglePlay:I,noneActionBar:M,hasBrowserMode:T,needExtraBottom:D}=e,{duration:O,videoPercent:E,currentTime:B}=(0,r.mp)(ii.M,{selector:e=>e[b]?e[b]:{duration:0,videoPercent:0,currentTime:0},dependencies:[b]}),{percent:P,bindDrag:R,seek:z}=(0,go.S)({direction:g,progressRef:i,circleRef:o,barRef:l,initialPercent:0,draggingStateCb:d,draggingPercentCb:j,progressReportCallback:_}),{mute:F,setMute:V}=(0,L.s_)(4),[q,W]=(0,a.useState)(!1),H=(0,a.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),V(!F)}),[F,V]),A=(0,a.useMemo)((()=>w?(0,n.jsx)("svg",Object.assign({viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},Eo,{children:(0,n.jsx)("use",{xlinkHref:"#svg-play-fill"},void 0)}),void 0):(0,n.jsx)(po.Z,Object.assign({},Eo),void 0)),[w]),N=(0,a.useMemo)((()=>F?(0,n.jsx)(mo.Z,Object.assign({},Eo),void 0):(0,n.jsx)(ho.Z,Object.assign({},Eo),void 0)),[F]),U=(0,a.useCallback)((()=>{clearTimeout(x.current),p(!0)}),[]),$=(0,a.useCallback)((()=>{x.current=window.setTimeout((()=>{p(!1)}),500)}),[]),G=(0,a.useCallback)((()=>{h(!0)}),[]),J=(0,a.useCallback)((()=>{h(!1)}),[]);(0,a.useEffect)((()=>{k()}),[k]),(0,a.useEffect)((()=>{var e,t;null===(e=y.current)||void 0===e||e.onSeeked((()=>{setTimeout((()=>{u(!1)}),0)})),null===(t=y.current)||void 0===t||t.onSeeking((()=>{u(!0)}))}),[y.current,u]);const Q=(0,a.useCallback)((e=>{var t;(0,Pt.UW)(e),t={group_id:b},Z.W.event("browse_mode_entry_click",Object.assign(Object.assign({},t),{enter_method:"video_detail_expand_click"})),C()}),[C,b]),K=(0,xo.D)((()=>({onClick:I,onDoubleClick:S})),[I,S]),X=s||c?P:E,ee="ltr"===g?{left:`calc(${100*X}%)`}:{right:`calc(${100*X}%)`},te=v||s,ie=v||s||F||q;return(0,n.jsxs)(Io,Object.assign({needExtraBottom:D,onClick:K,ref:f,onMouseEnter:U,onMouseLeave:$,onMouseDown:Pt.UW},{children:[(0,n.jsx)(vo.ZP,Object.assign({in:te,timeout:500,nodeRef:f},{children:(0,n.jsxs)(Lo,Object.assign({active:te},{children:[(0,n.jsx)(Do,Object.assign({onClick:e.onTogglePlay},{children:A}),void 0),(0,n.jsx)(yo,{children:"ltr"===g?`${(0,Y.x)(B)}/${(0,Y.x)(O)}`:`${(0,Y.x)(O)}/${(0,Y.x)(B)}`},void 0)]}),void 0)}),void 0),T?(0,n.jsx)(vo.ZP,Object.assign({in:te,timeout:500,nodeRef:f},{children:(0,n.jsx)(Oo,{active:te,showActionBar:!M,onClick:Q},void 0)}),void 0):null,(0,n.jsx)(vo.ZP,Object.assign({in:ie,timeout:500,nodeRef:f},{children:(0,n.jsxs)(Mo,Object.assign({showActionBar:!M,active:ie,onMouseEnter:G,onMouseLeave:J,onMouseDown:Pt.UW},{children:[q||m&&!s?(0,n.jsx)(fo.y,{isStyleV2:!0,setVolumeDragging:W},void 0):null,(0,n.jsx)(To,Object.assign({mute:F,onClick:H},{children:N}),void 0)]}),void 0)}),void 0),(0,n.jsxs)(jo,Object.assign({ref:t},{children:[(0,n.jsx)(_o,{ref:i,onClick:z,onMouseDown:R},void 0),(0,n.jsx)(Co,Object.assign({ref:o,style:ee,onMouseDown:R},{children:(0,n.jsx)(So,{},void 0)}),void 0),(0,n.jsx)(ko,{ref:l,style:{width:100*X+"%"},onClick:z,onMouseDown:R},void 0)]}),void 0)]}),void 0)})),Po=(0,ze.Z)("div",{target:"eqrezik0"})({position:"absolute",width:"100%",height:"100%",left:0,top:0,overflow:"hidden",borderRadius:"4px"},"label:DivBlurBackgroundWrapper;"),Zo=(0,ze.Z)("div",{target:"eqrezik1"})({position:"absolute",width:"10%",height:"10%",filter:"blur(2px)",transform:"scale(11)",opacity:"0.3",background:"center no-repeat",backgroundSize:"cover",left:"50%",top:"50%"},"label:DivBlurBackground;"),Ro=(0,ze.Z)("div",{target:"eqrezik2"})((({hasBottomLine:e=!0})=>({borderBottom:e?"1px solid #F1F1F1":"none"})),"label:DivVideoInfoContainer;"),zo=(0,ze.Z)("div",{target:"eqrezik3"})({width:"100%",position:"relative"},"label:DivPlayerContainer;"),Fo=(0,ze.Z)("svg",{target:"eqrezik4"})({position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",pointerEvents:"none"},"label:SvgPlayIcon;"),Vo=(0,ze.Z)("div",{target:"eqrezik5"})({position:"relative",width:"100%",height:"100%",cursor:"pointer"},"label:DivVideoWrapper;"),qo=(0,ze.Z)("div",{target:"eqrezik6"})((({theme:{colors:e}})=>({width:"100%",height:"606px",background:e.ConstBGInverse,position:"relative",borderRadius:"4px",marginBottom:"24px"})),"label:DivVideoContainer;"),Wo=(0,ze.Z)("div",{target:"eqrezik7"})((({theme:e})=>({width:"100%",height:"100%",left:"0",top:"0",backdropFilter:"blur(50px)",backgroundColor:e.colors.SDSecondary,position:"absolute",zIndex:2})),"label:DivMask;"),Ho=(0,ze.Z)("div",{target:"eqrezik8"})({position:"absolute",top:"50%",transform:"translate(0, -50%)",width:"100%"},"label:DivMaskContainer;"),Ao=(0,ze.Z)("div",{target:"eqrezik9"})((({theme:e})=>({width:"106px",height:"106px",padding:"33px",margin:"0 auto 0",borderRadius:"50%",backgroundColor:e.colors.LineSecondary,color:e.colors.Positive})),"label:DivMaskIcon;"),No=(0,ze.Z)("div",{target:"eqrezik10"})((({theme:e})=>({maxWidth:"419px",margin:"24px auto 0",fontSize:"24px",lineHeight:"32px",textAlign:"center",color:e.colors.BGPrimary})),"label:DivMaskTitle;"),Uo=(0,ze.Z)("div",{target:"eqrezik11"})((({theme:e})=>({maxWidth:"419px",margin:"16px auto 0",fontSize:"18px",lineHeight:"24px",textAlign:"center",color:e.colors.BGPrimary})),"label:DivMaskDetail;"),$o=(0,ze.Z)("button",{target:"eqrezik12"})((({theme:e})=>({maxWidth:"419px",height:"56px",cursor:"pointer",margin:"224px auto 0",borderRadius:"2px",backgroundColor:e.colors.ConstBGContainer,color:e.colors.BGPrimary,padding:"16px",fontSize:"18px",lineHeight:"24px",textAlign:"center",border:"none",display:"block"})),"label:ButtonMask;"),Go=(0,a.forwardRef)(((e,t)=>{var i,o,l;const{item:s,currentIndex:d,teaParams:c,onScrollToComment:v}=e,p=(0,u.Q)(),m=(0,r.qj)(M.A),[h,g]=(0,a.useState)(!1),x=(0,a.useRef)(null),{hasBrowserMode:f,actionBarInPlayer:b}=(0,j.xy)(),w=null!==(i=null==s?void 0:s.id)&&void 0!==i?i:"",y=(0,a.useCallback)(((e="click")=>{m.postLikeVideo(Object.assign({id:w,enter_method:e},c))}),[m,w,c]),_=(0,Xe.X)({action:y,modalConfig:{query:{enter_method:"click_like"}}}),{videoPlayerRef:k,togglePlay:C,handleLinkClick:S}=function({pause:e,setPause:t,handleLikeClick:i}){const o=(0,a.useRef)(null),{enhanceVideoConsumptionVersion:n="v1"}=(0,Et.m)(),{mute:l,setMute:s}=(0,L.s_)(2),[,d]=(0,a.useState)(!1),c=(0,r.mp)(U.r,{selector:e=>e.isOpen,dependencies:[]}),u=(0,a.useCallback)((()=>{var i,n,r,a;e?null===(n=null===(i=o.current)||void 0===i?void 0:i.play)||void 0===n||n.call(i):null===(a=null===(r=o.current)||void 0===r?void 0:r.pause)||void 0===a||a.call(r),t(!e)}),[e,t]),v=(0,a.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),s(!l,"keydown")}),[l,s]),p=(0,a.useCallback)((e=>{if(27!==e.keyCode&&["input","textarea"].includes(e.target.tagName.toLocaleLowerCase())||"true"===e.target.getAttribute("contenteditable")||c)return;const t=new Map([[76,()=>{"v3"===n&&i("keydown")}],[77,()=>{"v3"===n&&v(e)}]]),{keyCode:o}=e;t.has(o)&&(e.preventDefault(),t.get(o)())}),[n,i,v,c]),m=(0,a.useRef)(""),[,h]=(0,a.useState)(0),[{isInputEmpty:g,noReplyUser:x}]=(0,r.b7)(Bt.p,{selector:({isInputEmpty:e,reply:t})=>({isInputEmpty:e,noReplyUser:0===t.nickname.length}),dependencies:[]}),f=(0,a.useCallback)(((e,t)=>{g&&x||((0,Pt.PF)(e),h(2),d(!0),m.current=t)}),[g,x]);return(0,a.useEffect)((()=>(document.addEventListener("keydown",p),()=>{document.removeEventListener("keydown",p)})),[p]),{handleLinkClick:f,preventDefault:Pt.PF,togglePlay:u,videoPlayerRef:o}}({pause:h,setPause:e=>{g(e)},handleLikeClick:_}),I=(0,r.qj)(ii.M),T=(0,a.useCallback)((e=>{var t,i,o;const n=null===(t=k.current)||void 0===t?void 0:t.duration;I.setVideoInfo({videoId:w,videoPercent:e,duration:n,currentTime:null!==(o=null===(i=k.current)||void 0===i?void 0:i.currentTime)&&void 0!==o?o:0})}),[w,I,k]),O=(0,a.useCallback)((e=>{var t,i;null===(i=null===(t=k.current)||void 0===t?void 0:t.seek)||void 0===i||i.call(t,e)}),[k]),E=(0,a.useCallback)((e=>{var t,i;null===(i=null===(t=k.current)||void 0===t?void 0:t.seekTime)||void 0===i||i.call(t,e)}),[k]);(0,a.useImperativeHandle)(t,(()=>({seekTime:E})));const{progressReportCallback:B,progressPreviewReportCallback:P}=(0,Zi.CE)({pause:h,videoPlayerRef:k,videoReportParams:c});(0,a.useEffect)((()=>{var e,t;g(!1),T(0),null===(t=null===(e=k.current)||void 0===e?void 0:e.play)||void 0===t||t.call(e)}),[s,T,k]);const Z=(0,Xe.X)({action:(0,a.useCallback)((e=>{const{clientX:t,clientY:i}=e;new Si.B(t,i).emit(),m.postLikeVideo({id:w,forceLike:!0})}),[w,m])}),R=(0,a.useCallback)((()=>{g(!0)}),[]),z=(0,a.useCallback)((()=>{g(!0)}),[]),F=(0,a.useCallback)((()=>{g(!1)}),[]),{showBrowserMode:q,isBrowserModeShowing:W}=(0,a.useContext)(D._),H=(0,V.fz)(ee.KF),A=(0,a.useCallback)((()=>{var e,t;q({index:d,playProgress:null!==(t=null===(e=k.current)||void 0===e?void 0:e.currentTime)&&void 0!==t?t:0,belowPlayMode:4,teaParams:c}),Pi.r.handleEnterBrowser(c),H.handleUserChangeVideoOrPlayMode()}),[q,d,c,H]);(0,a.useEffect)((()=>{W||g(!1)}),[W]);const N=(0,r.mp)(Ii.bg,{selector:e=>e.blockedVideos||[],dependencies:[]}),$=(0,r.mp)(ye,{selector:e=>{var t;return null!==(t=e.subtitleStruct)&&void 0!==t?t:null},dependencies:[s]}),G=(0,r.qj)(Ii.bg),Y=(0,a.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),s&&G.removeBlockVideo(s.id)}),[G,s]),J=(0,a.useCallback)((()=>{v()}),[v]);if(!s||!(null==s?void 0:s.video))return(0,Je.G)(["item.video"]);const{video:{cover:Q,playAddr:K="",width:X=1,height:te=1},id:ie,itemMute:oe,warnInfo:ne,scheduleTime:re,downloadSetting:ae=0,authorPrivate:le=!1}=s,se=(X/te||1)>=1,de=Boolean(null==ne?void 0:ne[0])||Boolean(re);return(0,n.jsxs)(zo,{children:[(0,n.jsxs)(qo,Object.assign({ref:x},{children:[(0,n.jsx)(Po,{children:(0,n.jsx)(Zo,{style:{backgroundImage:`url(${Q})`}},void 0)},void 0),(0,n.jsxs)(Vo,{children:[(0,n.jsx)(Li.S,{poster:Q,horizontal:se,mode:4,ref:k,desc:s.desc,id:ie,playUrl:K,index:d,itemMute:Boolean(oe),teaParams:c,onVideoError:R,onTimeUpdate:T,onVideoPause:z,onVideoPlay:F,subtitleStruct:$,disableDownload:le||0!==ae},ie),N.includes(s.id||"")?(0,n.jsx)(Wo,{children:(0,n.jsxs)(Ho,{children:[(0,n.jsx)(Ao,{children:(0,n.jsx)(Ci.Z,{width:40,height:40},void 0)},void 0),(0,n.jsx)(No,{children:p("Web_report_thanks_for_report")},void 0),(0,n.jsx)(Uo,{children:p("Web_report_hide_video")},void 0),(0,n.jsx)($o,Object.assign({onClick:Y},{children:p("Web_report_show_video")}),void 0)]},void 0)},void 0):null]},void 0),(0,n.jsx)(Bo,{needExtraBottom:de,onGoBrowserMode:A,currentCanPlay:null!==(l=null===(o=k.current)||void 0===o?void 0:o.currentCanPlay)&&void 0!==l&&l,seek:O,videoId:w,pause:h,onDoubleClick:Z,onTogglePlay:C,videoRef:k,progressReportCallback:B,progressPreviewReportCallback:P,noneActionBar:!b,hasBrowserMode:f},void 0),h&&(0,n.jsx)(Fo,Object.assign({viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",width:70,height:70,fill:"#fff"},{children:(0,n.jsx)("use",{xlinkHref:"#svg-play-fill"},void 0)}),void 0),(null==ne?void 0:ne[0])&&(0,n.jsx)(Mi.zo,{children:(0,n.jsx)(Ti.p,{info:null==ne?void 0:ne[0]},void 0)},void 0),Boolean(re)&&(0,n.jsx)(Mi.zo,{children:(0,n.jsx)(Di.W,{isTextAlignStart:!0,scheduledTime:Number(re),height:56,fontSize:14,iconSize:18.33,iconMargin:4.83},void 0)},void 0)]}),void 0),(0,n.jsxs)(Ro,Object.assign({hasBottomLine:b},{children:[(0,n.jsx)(Oi.Q,{onLinkClick:S,item:s,e2eTag:"browse-video-desc",reportParams:c},void 0),(0,n.jsx)(Ei.C,{item:s},void 0),(0,n.jsx)(Bi._,{onLinkClick:S,styleType:1,item:s,e2eTag:"browse-music",teaParams:c},void 0)]}),void 0),(0,n.jsx)(lo,{needExtraBottom:b&&de,onClickComment:J,isHorizontal:!b,itemId:w,isPaused:h},void 0)]},void 0)}));var Yo=i(30074),Jo=i(75924),Qo=i(52765);const Ko=(0,ze.Z)("div",{target:"e1ymawm00"})((({isNarrowState:e=!1})=>({display:"flex",justifyContent:e?"":"space-between",flexWrap:"wrap"})),"label:DivListContainer;"),Xo=(0,ze.Z)("div",{target:"e1ymawm01"})((({theme:e,isNarrowState:t})=>(0,Fe.YJ)({marginEnd:t?"14px":"0px",direction:e.direction})),{width:"147px",marginBottom:"16px",cursor:"pointer"},"label:DivItemContainer;"),en=(0,ze.Z)("div",{target:"e1ymawm02"})({width:"100%",height:"202px",position:"relative",borderRadius:"2px",marginBottom:"8px",overflow:"hidden"},"label:DivCoverContainer;"),tn=(0,ze.Z)("div",{target:"e1ymawm03"})({width:"100%",height:"100%",position:"absolute",left:"0",top:"0"},"label:DivPlayerWrapper;"),on=(0,ze.Z)("img",{target:"e1ymawm04"})({width:"100%",height:"100%",objectFit:"cover",background:"#F8F8F8"},"label:ImgCover;"),nn=(0,ze.Z)("div",{target:"e1ymawm05"})({position:"absolute",bottom:"4px",right:"4px",background:"rgba(0, 0, 0, 0.7)",borderRadius:"2px",padding:"2px",fontSize:"12px",color:"#fff"},"label:DivDuration;"),rn=(0,ze.Z)("div",{target:"e1ymawm06"})((({theme:e})=>(0,Fe.GI)({theme:e,fontWeight:"bold"})),(0,Fe.FC)(3),{color:"#161823",marginBottom:"4px",wordBreak:"break-word"},"label:DivTitle;"),an=(0,ze.Z)("div",{target:"e1ymawm07"})({color:"rgba(22, 24, 35, 0.75)",fontSize:"12px",lineHeight:"16px",marginBottom:"4px",display:"flex",alignItems:"center"},"label:DivAuthor;"),ln=(0,ze.Z)("div",{target:"e1ymawm08"})({display:"flex",height:"16px",color:"rgba(22, 24, 35, 0.75)",alignItems:"center",fontSize:"12px"},"label:DivOtherInfo;"),sn=(0,ze.Z)("div",{target:"e1ymawm09"})((({theme:e})=>[(0,Fe.YJ)({direction:e.direction,marginEnd:"8px"})]),"label:DivDate;"),dn=(0,ze.Z)(Qo.Z,{target:"e1ymawm010"})((({theme:e})=>[(0,Fe.YJ)({direction:e.direction,marginEnd:"4px"})]),"label:StyledHeart;"),cn=(0,ze.Z)("div",{target:"e1ymawm011"})({borderBottom:"1px solid #F1F1F1",marginTop:"23px"},"label:DivListWrapper;"),un=(0,ze.Z)(rt.W,{target:"e1ymawm012"})({marginBottom:"24px",minWidth:"unset",fontSize:"16px",paddingLeft:"16px",paddingRight:"16px"},"label:StyledMoreBtn;"),vn=(0,ze.Z)("div",{target:"e1ymawm013"})({width:"100%",display:"flex",justifyContent:"center"},"label:DivLoadingWrapper;"),pn=(0,ze.Z)("div",{target:"e1t22qao0"})((({isNarrowState:e=!1})=>({display:"flex",flexDirection:"column",marginTop:e?"23px":"0",borderBottom:e?"1px solid #F1F1F1":"none"})),"label:DivListContainer;"),mn=(0,ze.Z)("div",{target:"e1t22qao1"})({width:"100%",height:"90px",marginBottom:"24px",cursor:"pointer",display:"flex"},"label:DivItemContainer;"),hn=(0,ze.Z)("div",{target:"e1t22qao2"})((({theme:e})=>(0,Fe.YJ)({direction:e.direction,marginEnd:"12px"})),{height:"100%",width:"120px",position:"relative",borderRadius:"2px",overflow:"hidden",flex:"0 0 120px"},"label:DivCoverContainer;"),gn=(0,ze.Z)("img",{target:"e1t22qao5"})({width:"100%",height:"100%",objectFit:"cover",background:"#F8F8F8"},"label:ImgCover;"),xn=(0,ze.Z)("div",{target:"e1t22qao6"})({position:"absolute",bottom:"4px",right:"4px",background:"rgba(0, 0, 0, 0.7)",borderRadius:"2px",padding:"2px",fontSize:"12px",color:"#fff"},"label:DivDuration;"),fn=(0,ze.Z)("div",{target:"e1t22qao7"})({flex:"1"},"label:DivInfoContent;"),bn=(0,ze.Z)("div",{target:"e1t22qao8"})((({theme:e})=>(0,Fe.GI)({theme:e,fontWeight:"bold"})),(0,Fe.FC)(2),{fontSize:"14px",lineHeight:"20px",color:"#161823",marginBottom:"8px",wordBreak:"break-word"},"label:DivTitle;"),wn=(0,ze.Z)("div",{target:"e1t22qao9"})(Fe.wj,{color:"rgba(22, 24, 35, 0.75)",fontSize:"12px",lineHeight:"16px",marginBottom:"4px",display:"flex",alignItems:"center"},"label:DivAuthor;"),jn=(0,ze.Z)("div",{target:"e1t22qao10"})({display:"flex",height:"16px",color:"rgba(22, 24, 35, 0.75)",alignItems:"center",fontSize:"12px"},"label:DivOtherInfo;"),yn=(0,ze.Z)("div",{target:"e1t22qao11"})((({theme:e})=>[(0,Fe.YJ)({direction:e.direction,marginEnd:"8px"})]),"label:DivDate;"),_n=(0,ze.Z)(Qo.Z,{target:"e1t22qao12"})((({theme:e})=>[(0,Fe.YJ)({direction:e.direction,marginEnd:"4px"})]),"label:StyledHeart;"),kn=(0,ze.Z)(rt.W,{target:"e1t22qao13"})({marginBottom:"24px",minWidth:"unset",fontSize:"16px",paddingLeft:"16px",paddingRight:"16px"},"label:StyledMoreBtn;"),Cn=(0,ze.Z)("div",{target:"e1t22qao14"})({width:"100%",display:"flex",justifyContent:"center"},"label:DivLoadingWrapper;"),Sn=(0,a.memo)((e=>{const{item:t,index:i,isNarrowState:o}=e,{video:{cover:l,duration:s,playAddr:d=""},desc:c,author:u="",createTime:v,stats:p}=t,h=(0,r.mp)(Ue.z,{selector:e=>e.users[u],dependencies:[u]}),{timeTranslator:g}=(0,$e.e)(),{uniqueId:x,verified:f}=null!=h?h:{},b=(0,a.useRef)(null),[w,j]=(0,a.useState)(!1);(0,a.useEffect)((()=>{var e,t,i,o;w&&b.current?null===(t=(e=b.current).play)||void 0===t||t.call(e):b.current&&(null===(o=(i=b.current).pause)||void 0===o||o.call(i))}),[w]),(0,a.useEffect)((()=>{R({author_id:u,group_id:t.id,rank:i})}),[]);const y=(0,r.qj)(ye),_=(0,a.useCallback)((()=>{z({author_id:u,group_id:t.id,rank:i}),y.handleSelectVideo({newIndex:i})}),[u,i,t.id,y]),k=(0,a.useCallback)((()=>{j(!0)}),[]),C=(0,a.useCallback)((()=>{j(!1)}),[]);return(0,n.jsxs)(mn,Object.assign({isNarrowState:o,onClick:_},{children:[(0,n.jsxs)(hn,Object.assign({onMouseEnter:k,onMouseLeave:C},{children:[(0,n.jsx)(gn,{src:l},void 0),w?(0,n.jsx)(tn,{children:(0,n.jsx)(Jo.N,{style:{position:"relative"},ref:b,horizontal:!1,muteSetting:!0,defaultMute:!0,playProgress:0,src:d},void 0)},void 0):null,(0,n.jsx)(xn,{children:(0,Y.x)(s)},void 0)]}),void 0),(0,n.jsxs)(fn,{children:[(0,n.jsx)(bn,{children:c},void 0),(0,n.jsxs)(wn,{children:[x,f&&(0,n.jsx)(it.Q,{width:10,height:10},void 0),(0,n.jsx)("span",Object.assign({style:{margin:"0 4px"}},{children:" · "}),void 0),(0,n.jsx)(yn,{children:g(1e3*Number(v))},void 0)]},void 0),(0,n.jsxs)(jn,{children:[(0,n.jsx)(_n,{width:16,height:16,fill:"rgba(22, 24, 35, 0.75)"},void 0),(0,m.BT)(null==p?void 0:p.diggCount)]},void 0)]},void 0)]}),void 0)})),In=(0,a.memo)((({itemList:e,isNarrowState:t,onLoadMore:i,hasMore:o,isLoading:r})=>{const l=e.slice(1),s=(0,u.Q)(),{narrowStateHasMore:d,handleLoadMore:c,narrowStateList:v}=Rt({relatedList:l,isNarrowState:t,onLoadMore:i,hasMore:o,isLoading:r}),p=t?d?(0,n.jsx)("div",{children:(0,n.jsx)(kn,Object.assign({size:"medium",disabled:r,buttonTheme:"line",onClick:c},{children:s("video_details_page_morevideos_btn")}),void 0)},void 0):null:r&&l.length>1&&o?(0,n.jsx)(Cn,{children:(0,n.jsx)(Yo.g,{},void 0)},void 0):null,m=(0,a.useMemo)((()=>t?v:l),[t,v,l]);return(0,n.jsxs)(pn,Object.assign({isNarrowState:t},{children:[m.map(((e,t)=>e&&(0,n.jsx)(Sn,{index:t+1,item:e},e.id))),p]}),void 0)}));var Ln=i(16929);const Mn=(0,a.memo)((e=>{const{item:t,index:i,isNarrowState:o}=e,{video:{cover:l,duration:s,playAddr:d=""},desc:c,author:u="",createTime:v,stats:p}=t,h=(0,a.useRef)(null),[g,x]=(0,a.useState)(!1);(0,a.useEffect)((()=>{var e,t,i,o;g&&h.current?null===(t=(e=h.current).play)||void 0===t||t.call(e):h.current&&(null===(o=(i=h.current).pause)||void 0===o||o.call(i))}),[g]),(0,a.useEffect)((()=>{R({author_id:u,group_id:t.id,rank:i})}),[]);const f=(0,r.mp)(Ue.z,{selector:e=>e.users[u],dependencies:[u]}),{timeTranslator:b}=(0,$e.e)(),{uniqueId:w,verified:y}=null!=f?f:{},_=(0,r.qj)(ye),{shouldUseRelatedVideo:k}=(0,j.e6)(),C=(0,a.useCallback)((()=>{z({author_id:u,group_id:t.id,rank:i}),k?_.handleSelectVideo({newIndex:i}):_.handleSwitchVideo({newIndex:i})}),[u,t.id,i,_,k]),S=(0,a.useCallback)((()=>{x(!0)}),[]),I=(0,a.useCallback)((()=>{x(!1)}),[]);return(0,n.jsxs)(Xo,Object.assign({isNarrowState:o,onClick:C},{children:[(0,n.jsxs)(en,Object.assign({onMouseEnter:S,onMouseLeave:I},{children:[(0,n.jsx)(on,{src:l},void 0),g?(0,n.jsx)(tn,{children:(0,n.jsx)(Jo.N,{ref:h,horizontal:!1,itemMute:!0,muteSetting:Ln.P[4].forceMute,defaultMute:Ln.P[4].defaultMute,playProgress:0,src:d},void 0)},void 0):null,(0,n.jsx)(nn,{children:(0,Y.x)(s)},void 0)]}),void 0),(0,n.jsx)(rn,{children:c},void 0),(0,n.jsxs)(an,{children:[w,y&&(0,n.jsx)(it.Q,{width:10,height:10},void 0)]},void 0),(0,n.jsxs)(ln,{children:[(0,n.jsx)(sn,{children:b(1e3*Number(v))},void 0),(0,n.jsx)(dn,{width:16,height:16,fill:"rgba(22, 24, 35, 0.75)"},void 0),(0,m.BT)(null==p?void 0:p.diggCount)]},void 0)]}),void 0)})),Tn=(0,a.memo)((0,a.forwardRef)((({itemList:e,isNarrowState:t,onLoadMore:i,hasMore:o,isLoading:r},a)=>{const l=e.slice(1),s=(0,u.Q)(),{narrowStateHasMore:d,handleLoadMore:c,narrowStateList:v}=Rt({relatedList:l,isNarrowState:t,onLoadMore:i,hasMore:o,isLoading:r});return t?(0,n.jsxs)(cn,{children:[(0,n.jsx)(Ko,Object.assign({isNarrowState:t},{children:v.map(((e,i)=>e&&(0,n.jsx)(Mn,{isNarrowState:t,index:i+1,item:e},e.id)))}),void 0),d?(0,n.jsx)(un,Object.assign({size:"medium",disabled:r,buttonTheme:"line",onClick:c},{children:s("video_details_page_morevideos_btn")}),void 0):null]},void 0):(0,n.jsxs)(Ko,Object.assign({ref:a},{children:[l.map(((e,t)=>e&&(0,n.jsx)(Mn,{index:t+1,item:e},e.id))),r&&l.length>1&&o?(0,n.jsx)(vn,{children:(0,n.jsx)(Yo.g,{},void 0)},void 0):null]}),void 0)}))),Dn=(0,n.jsx)(s.Z,Object.assign({},k.vj),void 0),On=(0,n.jsx)(d.Z,Object.assign({},k.vj),void 0),En=(0,c.l)((function({itemId:e}){var t;const i=(0,u.Q)(),[o,s]=(0,a.useState)(!1),[{currentIndex:d,itemListKey:c,subtitleContent:v,ifShowSubtitle:m},h]=(0,r.b7)(ye),f=(0,r.qj)(I.x),b=(0,a.useRef)(!1),w=(0,a.useRef)(null),y=(0,a.useRef)(null),_=(0,a.useCallback)((e=>{var t;null===(t=null==y?void 0:y.current)||void 0===t||t.seekTime(e)}),[y]);(0,a.useEffect)((()=>{f.fetchComment({aweme_id:e})}),[e,f]),(0,L.$v)(4),(0,a.useEffect)((()=>{s(window.innerWidth<903)}),[]);const{browserList:C,listHasMore:S,listLoading:R}=(0,r.mp)(p.h,{selector:e=>{const t=e[null!=c?c:""];return t?{browserList:t.browserList,listHasMore:!0,listLoading:t.loading}:{browserList:[],listHasMore:!0,listLoading:!1}},dependencies:[]});(0,a.useEffect)((()=>{!b.current&&C.length>=1&&(h.handleFirstVideo(),b.current=!0)}),[C]);const[{itemList:z,currentItem:V,subtitleInfos:q}]=(0,r.b7)(M.A,{selector:e=>{var t,i;return{itemList:C.map((t=>e[t])),currentItem:e[C[d]],subtitleInfos:null===(i=null===(t=e[C[d]])||void 0===t?void 0:t.video)||void 0===i?void 0:i.subtitleInfos}},dependencies:[C,d]}),W=null!==(t=null==V?void 0:V.id)&&void 0!==t?t:"",H=(0,a.useRef)(null);(0,a.useEffect)((()=>{var e;W&&(null===(e=H.current)||void 0===e||e.scrollIntoView())}),[W]);const A=(0,a.useMemo)((()=>({author:"",scheduleTime:""})),[]),{author:N="",scheduleTime:U}=null!=V?V:A,$=function({id:e}){const t=(0,r.qj)(I.x),i=(0,a.useRef)(null),o=(0,a.useCallback)((()=>{t.fetchComment({aweme_id:e})}),[t,e]);return(0,a.useEffect)((()=>()=>{t.dispose$(),t.setCommentItem({awemeId:""})}),[t]),(0,O.q)({elemRef:i,onHitBottom:o,bottomThreshold:20,throttle:500}),i}({id:W}),{currentIndex:G}=(0,r.mp)(T.O),{isBrowserModeShowing:Y}=(0,a.useContext)(D._);(0,a.useEffect)((()=>{Y&&h.handleSwitchVideo({newIndex:G})}),[G,Y,h]);const{isDefaultHidden:J,isDownloadTranscript:Q,isDefaultExpanded:K}=(0,j.II)(),[X,ee]=(0,a.useState)(K);(0,a.useEffect)((()=>{Q&&!(null==v?void 0:v.length)&&q&&(null==q?void 0:q.length)>0&&h.downloadTranscript({subtitleInfos:q})}),[q,v,h,Q]);const te=Pe();(0,O.q)({onHitBottom:te,elemRef:w});const ie=(0,r.mp)(Be,{selector:({statusCode:e})=>e,dependencies:[]}),oe=(0,a.useMemo)((()=>{const{video:{bitrate:e=-1,encodedType:t="",format:i="",videoQuality:o="",encodeUserTag:n="",codecType:r="",definition:a=""}={},authorId:l="",id:s="",scheduleTime:d,secret:c=!1,forFriend:u=!1}=null!=V?V:{video:{}};return{author_id:l,group_id:s,is_scheduled:Boolean(d),bitrate:Number(e),encodedType:t,format:i,videoQuality:o,encodeUserTag:n,codecType:r,definition:a,secret:c,forFriend:u}}),[V]),ne=(0,l.k6)(),re=(0,a.useCallback)((()=>{const{id:e=""}=null!=V?V:{};var t;t={group_id:e},Z.W.event("back_fyp_click",Object.assign(Object.assign({},t),{enter_method:"back_fyp_click"})),F.W.handleEnterTrending({enter_method:"back_fyp_click",group_id:e}),ne.push(`${P.Ad.foryou}?enter_from=video_detail`)}),[ne,V]),{isServerError:ae,isCommonError:le,isInitLoading:se,isEmpty:de}=Ze(),ce=Re();if(ae)return(0,n.jsx)(qe,{children:(0,n.jsx)(g.T,{iconElem:k.hE,title:i("server_error_title"),desc:i("server_error_sub"),buttonText:i("refresh"),onButtonClick:ce},void 0)},void 0);if(le){const{title:e,desc:t}=(0,x.S9)(ie),o=10239===ie?On:Dn;return(0,n.jsx)(qe,{children:(0,n.jsx)(g.T,{iconElem:o,title:i((0,x.V5)(ie)),desc:i((0,x.ox)(ie)),e2eTitle:e,e2eDesc:t},void 0)},void 0)}if(de)return null;const ue=(0,a.useCallback)((e=>{e!==o&&s(e)}),[o]),{shouldUseRelatedVideo:ve}=(0,j.e6)();!function({onPageWidthBreakPoint:e}){const t=(0,Zt.fB)((()=>{null==e||e(window.innerWidth<903)}),[e],500);(0,a.useEffect)((()=>(window.addEventListener("resize",t),()=>window.removeEventListener("resize",t))),[t])}({onPageWidthBreakPoint:ue});const{verticalVideoPanel:pe,hasFYPBack:me}=(0,j.xy)(),he=(0,a.useCallback)((()=>{const e={onLoadMore:te,isLoading:R,hasMore:S,isNarrowState:o,itemList:z},t=(null==z?void 0:z.length)<=1&&S||se;return pe?t?(0,n.jsx)(_i,{},void 0):(0,n.jsx)(Tn,Object.assign({ref:w},e),void 0):t?(0,n.jsx)(ki,{},void 0):(0,n.jsx)(In,Object.assign({},e),void 0)}),[z,S,se,o,R,te,pe]),ge=(0,a.useCallback)((()=>{var e;null===(e=null==$?void 0:$.current)||void 0===e||e.scrollIntoView()}),[$]),{uniqueId:xe}=(0,l.UO)(),{shouldRenderDirectory:fe,directoryLinksList:be}=(0,E.VK)(xe||"");return(0,n.jsxs)(Ft,{children:[(0,n.jsx)(Vt,{ref:H},void 0),me?(0,n.jsx)(qt,{children:(0,n.jsxs)(Wt,Object.assign({onClick:re},{children:[(0,n.jsx)(Ht,{width:32,height:32},void 0),(0,n.jsx)(At,{children:i("display_comments_videodetailspage_back_arrow_foryoufeed")},void 0)]}),void 0)},void 0):null,(0,n.jsxs)(Nt,{children:[(0,n.jsxs)(Ut,{children:[se?(0,n.jsx)(Jt,{},void 0):(0,n.jsx)(Go,{onScrollToComment:ge,teaParams:oe,item:V,currentIndex:d,ref:y},void 0),N?(0,n.jsx)($t,{children:(0,n.jsx)(vt,{teaParams:oe,uniqueId:N,videoId:W},void 0)},void 0):null,o&&(m||!J)&&(null==v?void 0:v.length)>0?(0,n.jsx)(bi,{item:V,onSeek:_,isNarrow:!0,isListShow:X,setIsListShow:ee},void 0):null,o?he():null,(0,n.jsx)(Dt,{scheduleTime:Number(U),ref:$,teaParams:oe,itemId:W,disableReply:!1},void 0)]},void 0),o?null:(0,n.jsxs)(Gt,{children:[(m||!J)&&(null==v?void 0:v.length)>0?(0,n.jsx)(bi,{item:V,onSeek:_,isNarrow:!1,isListShow:X,setIsListShow:ee},void 0):null,(0,n.jsx)(Yt,{children:i(ve?"video_details_page_relatedvideos_panel_header":"display_comments_videodetailspage_recommendedvideos_panel_header")},void 0),he()]},void 0)]},void 0),fe&&(0,n.jsx)(B.t,{directoryLinksList:be},void 0)]},void 0)})),Bn=(0,n.jsx)(s.Z,Object.assign({},k.vj),void 0),Pn=(0,n.jsx)(d.Z,Object.assign({},k.vj),void 0),Zn=(0,c.l)((function(){const e=(0,u.Q)(),t=Pe(),i=function(){const[e]=(0,r.b7)(p.h,{selector:e=>{var t;return null!==(t=e.video)&&void 0!==t?t:{list:[],loading:!1,hasMore:!0,statusCode:0}},dependencies:[]}),t=(0,r.qj)(U.r),{statusCode:i,hasMore:o}=e;return(0,a.useCallback)((()=>{o||10404!==i||t.openModal({isSignup:!1,query:{redirect_url:window.location.href,enter_method:"vv_limit"}})}),[t,i,o])}(),{isServerError:o,isCommonError:l,isInitLoading:s,isEmpty:d}=Ze();(0,v.AS)("video",t);const c=Re(),f=(0,a.useCallback)((()=>(0,n.jsx)(We,Object.assign({"data-e2e":"recommend-video-text"},{children:e("video_detail_explore_title")}),void 0)),[e]),{list:b,loading:w}=(0,r.mp)(p.h,{selector:e=>{var t;return null!==(t=e.video)&&void 0!==t?t:{list:[],loading:!1,statusCode:0}},dependencies:[]}),j=(0,r.mp)(Be,{selector:({statusCode:e})=>e,dependencies:[]}),{isGoogleBot:y}=(0,m.m7)((0,h.L)((()=>["isGoogleBot"]),[]));if(s)return(0,n.jsx)(C.H,{},void 0);if(o)return(0,n.jsx)(qe,{children:(0,n.jsx)(g.T,{iconElem:k.hE,title:e("server_error_title"),desc:e("server_error_sub"),buttonText:e("refresh"),onButtonClick:c},void 0)},void 0);if(l){const{title:t,desc:i}=(0,x.S9)(j),o=10239===j?Pn:Bn;return(0,n.jsx)(qe,{children:(0,n.jsx)(g.T,{iconElem:o,title:e((0,x.V5)(j)),desc:e((0,x.ox)(j)),e2eTitle:t,e2eDesc:i},void 0)},void 0)}return d?null:b.length?(0,n.jsx)(S.SL,{itemList:b,loading:w,renderInnerIndex:0,renderInner:f,onHitBottom:t,onPageBottom:i,ssrLimitDisable:y},void 0):null})),Rn=(0,f.r)("video",!1)((function(){const[{statusCode:e},t]=(0,r.b7)(Be),{enterForyou:i}=(0,r.mp)(b.e);(0,_.a)(i?"homepage_hot":"video_detail");const[{list:o,preloadList:s},d]=(0,r.b7)(p.h,{selector:e=>{var t,i,o,n,r,a;return{list:null!==(i=null===(t=e.video)||void 0===t?void 0:t.list)&&void 0!==i?i:[],statusCode:null!==(n=null===(o=e.video)||void 0===o?void 0:o.statusCode)&&void 0!==n?n:0,preloadList:null!==(a=null===(r=e.video)||void 0===r?void 0:r.preloadList)&&void 0!==a?a:[]}},dependencies:[]}),{id:c}=(0,l.UO)();!function(){var e;const t=(0,l.k6)(),{user:i,region:o=""}=null!==(e=(0,h.L)((()=>["user","region"]),[]))&&void 0!==e?e:{},{id:n}=(0,l.UO)();(0,J.L)((()=>{const{search:e,pathname:r,hash:a}=window.location,l=(0,H.parse)(e),s=Object.assign({},l);l.cid&&"string"==typeof l.cid&&(delete s.cid,window.history.replaceState(window.history.state,window.document.title,`${r}?${(0,H.stringify)(s)}${a}`));const d=Q.S.includes(o),c=K.$I.getItem("cid"),u=null!=c?c:l.cid;if(!d||!u||"string"!=typeof u)return;if(!Boolean(i))return K.$I.setItem("cid",u),void K.$I.setItem("vid",n);const v=K.$I.getItem("vid");if(K.$I.removeAll(),void 0!==v&&v!==n)return;const p=(0,X._)(u);p&&(s.browserMode="1",t.push(`${r}?${(0,H.stringify)(s)}${a}`,{cid:p,vid:n,browserMode:!0}))}),[t,i,o,n])}(),function({list:e}){const{id:t}=(0,l.UO)(),i=(0,l.TH)(),{state:o}=i,{showBrowserMode:n}=(0,a.useContext)(D._),r=(0,a.useRef)(!1),s=(0,a.useRef)(t),d=(0,l.k6)(),c=(0,V.fz)(ee.KF);(0,a.useEffect)((()=>{const{browserMode:a,vid:l}=(0,m.m7)(o);s.current!==t&&(r.current=!1),a&&t===l&&(null==e?void 0:e.length)&&e[0]===l&&!r.current&&(d.replace(Object.assign(Object.assign({},i),{state:Object.assign(Object.assign({},o),{browserMode:!1})})),r.current=!0,s.current=t,c.handleUserChangeVideoOrPlayMode(),n({index:0}))}),[t,e,o,n,d,i,c])}({list:o}),(()=>{const{list:e}=(0,r.mp)(p.h,{selector:e=>{var t;return null!==(t=e.video)&&void 0!==t?t:{list:[],loading:!1,statusCode:0}},dependencies:[]}),{hasNewVideoDetailPage:t}=(0,j.xy)(),{search:i,pathname:o}=(0,l.TH)(),n=t&&(0,$.cQ)(o),{setEnterForyou:s}=(0,r.qj)(b.e),d=(0,r.mp)(G.f,{selector:e=>{var t,i;return Number(null!==(i=null===(t=e.currentVideo)||void 0===t?void 0:t.index)&&void 0!==i?i:0)},dependencies:[]}),c=e[d],u=(0,r.mp)(M.A,{selector:e=>e[null!=c?c:""],dependencies:[c]}),v=(0,A.p)(null==u?void 0:u.author),{uniqueId:m="",secUid:h=""}=null!=v?v:{},g=function(e,t,i,o,n){const r=(0,N.fH)({uniqueId:t,videoId:i,secUid:o});return n?(0,H.stringifyUrl)({url:r,query:Object.assign(Object.assign({},W()((0,H.parse)(e),"sender_device","sender_web_id","item_id")),{is_from_webapp:"v1",item_id:i})},{skipNull:!0}):`${(0,H.stringifyUrl)({url:"/foryou",query:Object.assign(Object.assign({},W()((0,H.parse)(e),"sender_device","sender_web_id","item_id")),{is_from_webapp:"v1",item_id:i})},{skipNull:!0})}#${r}`}(i,m,c,h,n);(0,a.useEffect)((()=>{location.pathname!==P.Ad.foryou&&d>0&&e.length>0&&F.W.handleEnterTrending({enter_method:"see_more"});const t=n?d>=0:d>0;(location.pathname===P.Ad.foryou||t)&&e.length>0&&(s(!n),window.history.replaceState(window.history.state,"video-detail",g))}),[d,e,g,s,n])})(),(()=>{const{id:e}=(0,l.UO)(),{pathname:t,search:i}=(0,l.TH)(),o=(0,a.useMemo)((()=>{var e;return null===(e=/^\/@(.*)\/video\/\d+/.exec(t))||void 0===e?void 0:e[1]}),[t]),n=(0,a.useMemo)((()=>{var e;return null===(e=/^\/@.*\/video\/(\d+)/.exec(t))||void 0===e?void 0:e[1]}),[t]),s=(0,r.mp)(M.A,{selector:e=>e[null!=n?n:""],dependencies:[n]}),d=(0,A.p)(null==s?void 0:s.author),{uniqueId:c,secUid:u}=null!=d?d:{},v=(0,N.Pz)({uniqueId:c,secUid:u});(0,a.useEffect)((()=>{if(v&&n===e&&o!==v){const e=`/@${v}/video/${n}${i}`,t=Object.assign(Object.assign({},history.state),{as:e});window.history.replaceState(t,"open_video_page",e)}}),[e,v,o,i,n])})(),(0,w.s)(s),(0,a.useEffect)((()=>{t.getVideoDetail({itemId:c})}),[t,c]);const{shouldUseRelatedVideo:u}=(0,j.e6)(),v=(0,a.useRef)(!1);(0,a.useEffect)((()=>{0!==e||v.current||(v.current=!0,u?d.getRelatedList({key:"video",itemId:c}):d.getRecommendList({key:"video",itemId:c}))}),[d,o.length,e,c,u]),(0,a.useEffect)((()=>()=>{d.resetItemList({key:"video",loading:!0})}),[c,d]);const{hasNewVideoDetailPage:g}=(0,j.xy)();return(0,n.jsxs)(Ve,Object.assign({showVideoCommentDetail:g},{children:[g?(0,n.jsx)(En,{itemId:c},void 0):(0,n.jsx)(Zn,{},void 0),(0,n.jsx)(y.vr,{},"static-fixed")]}),void 0)})),zn=Rn}}]);